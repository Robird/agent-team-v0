# Resolve-Tier: Agent Self-Hosting

> **状态**: 孵化中
> **最后更新**: 2026-01-15

## 核心问题

**值得做吗？** 

是的。当前 AI Team 的运行环境高度依赖上游实验功能，存在被动断裂的风险。

## 待明确的决策点

### D1: 目标定位

**问题**: 自建环境的定位是什么？

| 选项 | 优势 | 劣势 |
|:-----|:-----|:-----|
| **A: 响应式问答** | 技术简单，快速落地 | 不能实现长期自主 |
| **B: 持续自主运行** | 符合 Agent-OS 愿景 | 技术复杂，周期长 |
| **C: 渐进式** | A → B 的平滑过渡 | 需要良好的架构设计 |

**初步倾向**: C（渐进式），但需要监护人确认。

### D2: 技术栈选择

**问题**: 用什么技术栈构建自建环境？

| 候选 | 说明 | 现有积累 |
|:-----|:-----|:---------|
| PipeMux | 进程编排框架 | 已有原型 |
| Agent.Core | 自研 Agent 框架 | 早期代码 |
| VS Code Extension | 继续作为扩展运行 | 当前方式 |
| 独立进程 | 脱离 VS Code | 无 |

**待调研**: 各技术栈的能力边界和迁移成本。

### D3: 与 copilot-chat 的关系

**问题**: 如何处理与 copilot-chat 的关系？

| 选项 | 说明 |
|:-----|:-----|
| **完全替换** | 自建完整的 chat 界面和后端 |
| **薄层封装** | 保留 copilot-chat 作为 UI，自建 Agent 调度层 |
| **渐进剥离** | 逐步将功能迁移到自建组件 |

**初步倾向**: 薄层封装 + 渐进剥离。

## 收集的洞见

### 来自 copilot-chat 同步分析 (2026-01-15)

- `customAgentInSubagent.enabled` 位于 VS Code 本体，非 copilot-chat
- 引入时间: 2025-11-06，相对较新的实验功能
- 上游活跃开发中，API 可能随时变更

### 来自 Agent-OS 理论框架

- 参见 `agent-team/beacon/draft-agent-operating-system.md`
- 核心概念：Agent 调度、状态持久化、工具注册

## 下一步

- [ ] 与监护人讨论目标定位（D1）
- [ ] 调研 PipeMux 和 Agent.Core 的能力边界
- [ ] 评估 W-0008 的成果是否可复用
