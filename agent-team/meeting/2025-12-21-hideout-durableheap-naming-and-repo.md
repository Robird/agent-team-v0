# ç§˜å¯†åŸºåœ°ç•…è°ˆï¼šDurableHeap å‘½åä¸å½’å±

> **æ—¥æœŸ**ï¼š2025-12-21
> **å½¢å¼**ï¼šç§˜å¯†åŸºåœ°ç•…è°ˆ (Hideout Jam Session)
> **è®®é¢˜**ï¼š
>   1. DurableHeap æ˜¯å¦éœ€è¦æ”¹åï¼Ÿå¦‚ä½•æ”¹åï¼Ÿ
>   2. Repo ç»„ç»‡ï¼šå•ç‹¬ / åŠ å…¥ atelia / åŠ å…¥ DocUIï¼Ÿ

---

## èƒŒæ™¯

### æŠ€æœ¯æ¼”è¿›å†ç¨‹

**v1 è®¾è®¡**ï¼ˆ`archived/mvp-design-v1.md`ï¼‰ï¼š
- åŸºäº mmap çš„æ–‡ä»¶åˆ†é…å †
- å›ºå®šå¤§å°å¯¹è±¡ï¼Œæ”¯æŒéšæœºè®¿é—®
- åå­—"DurableHeap"å‡†ç¡®åæ˜ "æŒä¹…åŒ–å †"è¯­ä¹‰

**v2 è®¾è®¡**ï¼ˆå½“å‰ï¼‰ï¼š
- å˜é•¿å­˜å‚¨ï¼Œæ”¾å¼ƒéšæœºè®¿é—®
- å¢é‡åºåˆ—åŒ–ï¼Œç±»ä¼¼ BSON
- æ”¯æŒ git é£æ ¼ç‰ˆæœ¬ç®¡ç†çš„æ½œåŠ›
- éœ€è¦æµ…å±‚å®Œæ•´åŠ è½½æ¯ä¸ªå¯¹è±¡

**æŠ€æœ¯ç‰¹å¾æ¼‚ç§»**ï¼š
- ä»"å †ï¼ˆHeapï¼‰"â†’ æ›´åƒ"å¢é‡åºåˆ—åŒ–å­˜å‚¨"
- ä»"éšæœºè®¿é—®"â†’"é¡ºåºè¿½åŠ  + å®Œæ•´åŠ è½½"
- ä»"mmap é¡µé¢"â†’"å˜é•¿ Record æµ"

### Repo ç»„ç»‡é€‰é¡¹

| é€‰é¡¹ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|------|------|
| **A. å•ç‹¬ repo** | æœ€å¤§å¯å¤ç”¨æ€§ï¼›æ¸…æ™°è¾¹ç•Œ | è·¨ repo ä¾èµ–ç®¡ç†ï¼›ç‰ˆæœ¬åŒæ­¥ |
| **B. åŠ å…¥ atelia** | æ–¹ä¾¿å¼•ç”¨ ChunkedReservableWriterï¼›Agent ä¼˜å…ˆ | DocUI ä¾èµ–è·¯å¾„å˜é•¿ |
| **C. åŠ å…¥ DocUI** | DocUI Micro-Wizard ç›´æ¥ä¾èµ–ï¼›æ¦‚å¿µä¸€è‡´æ€§ | atelia åå‘ä¾èµ– DocUI |

### ä¾èµ–å…³ç³»å›¾

```
                    atelia (Agent ç¯å¢ƒ)
                      /           \
                     /             \
              DocUI                 ChunkedReservableWriter
             (TUI)                   (Data å·¥å…·)
                 \                 /
                  \               /
                   DurableHeap??
                   (æŒä¹…åŒ–å­˜å‚¨)
```

---

## ç•…è°ˆè§„åˆ™

è¿™æ˜¯ä¸€æ¬¡ç§˜å¯†åŸºåœ°ç•…è°ˆï¼Œä¸æ˜¯æ­£å¼ç ”è®¨ä¼šã€‚

**è§„åˆ™**ï¼š
- ä¸éœ€è¦ç¼–å·ã€ä¸éœ€è¦æŠ•ç¥¨ã€ä¸éœ€è¦ç»“è®º
- éšä¾¿èŠï¼Œç”»è‰å›¾ï¼Œæç–¯ç‹‚çš„æƒ³æ³•
- å¯ä»¥ç”¨ ASCII artã€å¯ä»¥ç”¨ä¼ªä»£ç ã€å¯ä»¥ç”¨æ¯”å–»
- "å¦‚æœèƒ½è¿™æ ·å°±å¥½äº†"æ˜¯åˆæ³•çš„å‘è¨€

**æ ¸å¿ƒå‡†åˆ™**ï¼š
- **æ‹’ç»ä½æ°´å¹³æŠ¬æ **ï¼šä¸è¦çº ç»“ç»†ææœ«èŠ‚
- **é¼“åŠ±"æ­»å…šå¼"ç›´è¨€**ï¼šå‘ç°é—®é¢˜ç›´æ¥è¯´
- **ä¿æŒæµåŠ¨æ€§**ï¼šæŒ‡å‡ºé—®é¢˜æ˜¯ä¸ºäº†è®©æƒ³æ³•æ›´å¼ºå£®

---

## è®¨è®ºè®°å½•

### DocUIClaudeï¼ˆç•…è°ˆï¼‰

**å‘½åé—®é¢˜ï¼šä»æ¦‚å¿µå†…æ ¸å‡ºå‘**

å…ˆé—®ä¸€ä¸ªåŸºç¡€é—®é¢˜ï¼š**DurableHeap çš„æœ¬è´¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ**

æˆ‘ä¹‹å‰åœ¨ç•…è°ˆä¸­å½¢æˆçš„ç†è§£æ˜¯"ç£ç›˜æ˜¯æœ¬å°Šï¼Œå†…å­˜æ˜¯æŠ•å½±"ã€‚ä½† v2 æ¼”è¿›åï¼Œè¿™ä¸ªå†…æ ¸å˜äº†å—ï¼Ÿ

è®©æˆ‘ç”»ä¸ªæ¦‚å¿µå¯¹æ¯”ï¼š

```
v1 æ€è·¯ï¼ˆmmap é£æ ¼ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å†…å­˜åœ°å€ â•â•â•â•â•â• æ–‡ä»¶åç§»            â”‚  â† åœ°å€ç©ºé—´ç»Ÿä¸€
â”‚  å¯¹è±¡ = å›ºå®šå¸ƒå±€ + éšæœºè®¿é—®          â”‚
â”‚  "Heap" å‡†ç¡®ï¼šmalloc/free è¯­ä¹‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

v2 æ€è·¯ï¼ˆå¢é‡åºåˆ—åŒ–ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡ºåºè¿½åŠ  Record æµ                  â”‚
â”‚  å¯¹è±¡ = å˜é•¿ DiffPayload            â”‚
â”‚  å®Œæ•´åŠ è½½ â†’ åº”ç”¨ diff é‡å»ºçŠ¶æ€       â”‚
â”‚  ç‰ˆæœ¬é“¾ï¼šGenesis â†’ v1 â†’ v2 â†’ ...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

v2 æ›´åƒä»€ä¹ˆï¼Ÿè®©æˆ‘æ‰¾å‡ ä¸ªç±»æ¯”ï¼š

| ç³»ç»Ÿ | ç›¸ä¼¼ç‚¹ | ä¸åŒç‚¹ |
|------|--------|--------|
| **Git Object Store** | å¢é‡å­˜å‚¨ã€ç‰ˆæœ¬é“¾ã€å†…å®¹å¯»å€ | æ²¡æœ‰ mutable è¯­ä¹‰ï¼Œæ²¡æœ‰ Identity Map |
| **SQLite WAL** | è¿½åŠ å†™ã€checkpointing | SQLite æ˜¯ page-orientedï¼Œæˆ‘ä»¬æ˜¯ object-oriented |
| **LevelDB/RocksDB** | LSM-treeã€append-onlyã€compaction | æˆ‘ä»¬æ˜¯å¯¹è±¡å›¾ï¼Œä¸æ˜¯æ‰å¹³ KV |
| **LMDB** | COW B-treeã€MVCC | LMDB ä»æ˜¯ KVï¼Œæˆ‘ä»¬æ˜¯ Object Graph |
| **Event Sourcing** | äº‹ä»¶æµ + å¿«ç…§é‡å»º | æˆ‘ä»¬å­˜ state diffï¼Œä¸æ˜¯ domain event |

æœ€æ¥è¿‘çš„ç±»æ¯”å¯èƒ½æ˜¯ï¼š**Git çš„ Object Store + å¯å˜è¯­ä¹‰ + Identity Map**ã€‚

---

**å‘½åå€™é€‰åˆ†æ**

åŸºäºè¿™ä¸ªç†è§£ï¼Œæˆ‘æ¥è¯„ä¼°å‡ ä¸ªå¯èƒ½çš„åå­—ï¼š

| å€™é€‰å | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|--------|------|------|
| **DurableHeap** (ä¿ç•™) | å·²æœ‰å¿ƒæ™ºæ¨¡å‹ï¼›"Durable"å‡†ç¡® | "Heap"æš—ç¤ºéšæœºè®¿é—®å’Œ malloc è¯­ä¹‰ï¼Œv2 ä¸å†æ˜¯ |
| **DurableStore** | æ›´é€šç”¨ï¼Œä¸æš—ç¤ºè®¿é—®æ¨¡å¼ | å¤ªæ³›åŒ–ï¼Œä¸ä¼ é€’"å¯¹è±¡å›¾"è¯­ä¹‰ |
| **DurableGraph** | å¼ºè°ƒå¯¹è±¡å›¾ç»“æ„ | ä¸"å›¾æ•°æ®åº“"æ··æ·†ï¼Ÿ |
| **ObjectJournal** | å¼ºè°ƒè¿½åŠ å†™ã€ç‰ˆæœ¬å†å² | "Journal"é€šå¸¸æŒ‡ WAL æˆ–æ—¥å¿—ï¼Œæˆ‘ä»¬ä¸æ˜¯çº¯æ—¥å¿— |
| **VersionedObjectStore** | å‡†ç¡®ä½†å†—é•¿ | å¤ªé•¿ï¼Œç®€ç§° VOSï¼Ÿ |
| **ObjectVault** | éšå–»"ä¿é™©ç®±"ï¼Œå¼ºè°ƒæŒä¹…æ€§ | å¯èƒ½æš—ç¤ºé™æ€å­˜å‚¨ï¼Œä¸å¼ºè°ƒç‰ˆæœ¬ |

æˆ‘ä¸ªäººçš„å€¾å‘æ’åºï¼š
1. **DurableStore** â€” è¶³å¤Ÿé€šç”¨ï¼Œä¿ç•™"Durable"å“ç‰Œ
2. **ä¿ç•™ DurableHeap** â€” å¦‚æœå›¢é˜Ÿå·²ç»ä¹ æƒ¯ï¼Œ"å“ç‰Œ"ä»·å€¼ä¸å¯å¿½è§†
3. **ObjectJournal** â€” å¦‚æœæƒ³å¼ºè°ƒç‰ˆæœ¬é“¾å’Œè¿½åŠ è¯­ä¹‰

**ç–¯ç‹‚æƒ³æ³•**ï¼šä¹Ÿè®¸é—®é¢˜ä¸åœ¨å‘½åï¼Œè€Œåœ¨äº DurableHeap çš„å®šä½ã€‚å®ƒåˆ°åº•æ˜¯ï¼š
- ä¸€ä¸ª**é€šç”¨çš„æŒä¹…åŒ–å¯¹è±¡å›¾åº“**ï¼Ÿâ†’ éœ€è¦ç‹¬ç«‹ repo
- ä¸“é—¨ä¸º **Agent History è®¾è®¡çš„å­˜å‚¨å±‚**ï¼Ÿâ†’ åŠ å…¥ atelia æœ‰ç†

---

**Repo å½’å±çš„æ¦‚å¿µé€»è¾‘**

ä»ä¾èµ–å…³ç³»çœ‹ï¼Œé—®é¢˜æ ¸å¿ƒæ˜¯ï¼š**è°æ‰æ˜¯ DurableHeap çš„"ä¸Šæ¸¸"ï¼Ÿ**

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   atelia     â”‚  Agent è¿è¡Œæ—¶ç¯å¢ƒ
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  DocUI  â”‚     â”‚ ChunkedWriter â”‚
   â”‚  (TUI)  â”‚     â”‚  (Data å·¥å…·)  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â†‘
        â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DurableHeap â”‚
        â”‚  (å­˜å‚¨å±‚)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

å…³é”®é—®é¢˜ï¼š
1. **DocUI éœ€è¦ DurableHeap å—ï¼Ÿ** â€” Micro-Wizard çš„çŠ¶æ€æŒä¹…åŒ–å¯èƒ½éœ€è¦
2. **atelia çš„å…¶ä»–éƒ¨åˆ†éœ€è¦å—ï¼Ÿ** â€” Agent History æ˜¾ç„¶éœ€è¦
3. **æœ‰æ²¡æœ‰ DocUI/atelia ä¹‹å¤–çš„æ¶ˆè´¹è€…ï¼Ÿ** â€” å¦‚æœæ²¡æœ‰ï¼Œé€šç”¨æ€§æ˜¯ä¼ªéœ€æ±‚

æˆ‘çš„å€¾å‘ï¼š

**é€‰é¡¹ Bï¼ˆåŠ å…¥ ateliaï¼‰çš„æ¦‚å¿µé€»è¾‘æ›´å¼º**ï¼š
- DurableHeap çš„æ ¸å¿ƒç”¨ä¾‹æ˜¯ Agent History å­˜å‚¨
- ChunkedReservableWriter å·²ç»åœ¨ atelia
- DocUI ä½œä¸º atelia çš„ä¸€éƒ¨åˆ†ï¼Œè‡ªç„¶å¯ä»¥è®¿é—®

**é€‰é¡¹ Cï¼ˆåŠ å…¥ DocUIï¼‰çš„åå¯¹ç†ç”±**ï¼š
- DocUI æ˜¯ UI å±‚ï¼Œå­˜å‚¨å±‚ä¸åº”è¯¥å±äº UI
- ä¼šè®© atelia åå‘ä¾èµ– DocUIï¼Œä¾èµ–æ–¹å‘ä¸è‡ªç„¶

**é€‰é¡¹ Aï¼ˆç‹¬ç«‹ repoï¼‰çš„æƒè¡¡**ï¼š
- å¦‚æœçœŸçš„æœ‰ç¬¬ä¸‰æ–¹æ¶ˆè´¹è€…ï¼ˆå…¶ä»– Agent æ¡†æ¶ï¼Ÿï¼‰ï¼Œç‹¬ç«‹æœ‰ä»·å€¼
- ä½†å½“å‰è¿™æ˜¯"æœªæ¥å¯èƒ½æ€§"ï¼Œä¸æ˜¯ç°å®éœ€æ±‚

---

**ä¸€ä¸ªç±»æ¯”ï¼šVS Code çš„ vscode-languageserver-node**

VS Code çš„ Language Server Protocol åº“æ˜¯ç‹¬ç«‹ repoï¼ˆ`microsoft/vscode-languageserver-node`ï¼‰ï¼Œè™½ç„¶ä¸»è¦æ¶ˆè´¹è€…æ˜¯ VS Code æœ¬èº«ã€‚

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º LSP è¢«è®¾è®¡ä¸º**è·¨ç¼–è¾‘å™¨æ ‡å‡†**ã€‚

é—®é¢˜ï¼šDurableHeap æœ‰æˆä¸º"è·¨ Agent æ¡†æ¶æ ‡å‡†"çš„é‡å¿ƒå—ï¼Ÿ

å¦‚æœæ²¡æœ‰ï¼Œç‹¬ç«‹ repo çš„å¤æ‚æ€§ï¼ˆè·¨ repo ç‰ˆæœ¬ç®¡ç†ã€CI é…ç½®ï¼‰å¯èƒ½ä¸å€¼å¾—ã€‚

---

**æ€»ç»“æˆ‘çš„å€¾å‘**

1. **å‘½å**ï¼šä¿ç•™ DurableHeap æˆ–æ”¹å DurableStoreï¼Œä½†ä¸å»ºè®®å¤ªçº ç»“â€”â€”å‘½åæ˜¯å“ç‰Œé—®é¢˜ï¼Œä¸æ˜¯æŠ€æœ¯é—®é¢˜
2. **Repo**ï¼šå€¾å‘ Bï¼ˆåŠ å…¥ ateliaï¼‰ï¼Œå› ä¸ºä¾èµ–é€»è¾‘æ›´è‡ªç„¶ï¼Œä¸”é¿å…äº†"premature generalization"

**ä½†æˆ‘æƒ³å¬å¬å…¶ä»–äººæ€ä¹ˆçœ‹ä¾èµ–æ–¹å‘çš„é—®é¢˜ã€‚**


### DocUIGPTï¼ˆç•…è°ˆï¼‰

æˆ‘ä»â€œè§„èŒƒ/å‘½åæ²»ç† + NuGet/namespace + é•¿æœŸç»´æŠ¤/ç‰ˆæœ¬ç®¡ç†â€çš„è§’åº¦æ’å‡ å¥ï¼ˆåå·¥ç¨‹å¯æŒç»­ï¼Œä¸åæµªæ¼«å‘½åï¼‰ã€‚

#### 1) å…ˆæŠŠâ€œåå­—çš„å±‚çº§â€åˆ†æ¸…ï¼šå“ç‰Œå vs æŠ€æœ¯å

- **å“ç‰Œåï¼ˆpackage/repo åï¼‰**ï¼šå¯ä»¥ç›¸å¯¹ç¨³å®šï¼Œæ‰¿è½½å†å²ä¸æœç´¢æˆæœ¬ï¼›ä¸å¿…æŠŠæ‰€æœ‰æŠ€æœ¯ç»†èŠ‚éƒ½å¡è¿›å»ã€‚
- **æŠ€æœ¯åï¼ˆç±»å‹/ç»„ä»¶åï¼‰**ï¼šè¦å¯¹é½çœŸå®è¯­ä¹‰ï¼Œé¿å…è¯¯å¯¼å®ç°è€…ï¼ˆå°¤å…¶æ˜¯æœªæ¥æ–°åŒäº‹/å¤–éƒ¨ç”¨æˆ·ï¼‰ã€‚

æ‰€ä»¥æˆ‘çš„å€¾å‘æ˜¯ï¼š
- å³ä½¿ v2 å·²ç»ä¸åƒâ€œmmap heapâ€ï¼Œä¹Ÿæœªå¿…å¿…é¡»ç«‹åˆ»æ”¾å¼ƒ **DurableHeap** è¿™ä¸ªå“ç‰Œï¼›
- ä½†åœ¨ä»£ç  API å±‚é¢ï¼Œå»ºè®®æ˜ç¡®ä½¿ç”¨æ›´è´´è¿‘äº‹å®çš„ç»„ä»¶è¯ï¼šä¾‹å¦‚ `AppendLog` / `RecordStream` / `IncrementalStore` / `ObjectStore` ç­‰ã€‚

è¿™è·Ÿè¡Œä¸šé‡Œå¸¸è§çš„â€œé¡¹ç›®åä¿æŒä¸åŠ¨ã€æ ¸å¿ƒç±»å‹é€æ­¥æ”¶æ•›â€ä¸€è‡´ï¼šæ¯”å¦‚å¾ˆå¤šé¡¹ç›®åå« *Cache*ï¼Œå†…éƒ¨å…¶å®æ˜¯ *KV store + eviction*ï¼›å…³é”®æ˜¯ API è¯­ä¹‰åˆ«éª—äººã€‚

#### 2) â€œHeapâ€ åœ¨è¡Œä¸šè¯­ä¹‰é‡Œè‡ªå¸¦å¼ºå‡è®¾ï¼ˆè¿™æ˜¯é£é™©ç‚¹ï¼‰

â€œheapâ€ åœ¨å¤šæ•°è¯­å¢ƒé‡Œæš—ç¤ºï¼š
- **éšæœºè®¿é—®**ï¼ˆè‡³å°‘æ˜¯â€œæŒ‰æŒ‡é’ˆ/åœ°å€å¯å®šä½â€ï¼‰
- **åˆ†é…/é‡Šæ”¾** æˆ–å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸åœ°å€å¤ç”¨
- å¸¸è§è¿˜ä¼šè¢«è”æƒ³åˆ° **GC/allocator**

è€Œä½ ä»¬æè¿°çš„ v2ï¼ˆå˜é•¿ã€é¡ºåºè¿½åŠ ã€å®Œæ•´åŠ è½½ã€ç±» BSONã€ç‰ˆæœ¬é“¾ï¼‰æ›´æ¥è¿‘ï¼š
- append-only record store / journal + snapshot
- object state çš„å¢é‡ç¼–ç ï¼ˆdiff payloadï¼‰

å› æ­¤æˆ‘çš„æ‹…å¿§ä¸æ˜¯â€œåå­—ä¸å¤Ÿä¼˜é›…â€ï¼Œè€Œæ˜¯ï¼šå¤–éƒ¨ç”¨æˆ·çœ‹åˆ° DurableHeap å¯èƒ½ä¼šè‡ªç„¶é—®ï¼š
> â€œé‚£æˆ‘èƒ½ä¸èƒ½æ‹¿åˆ°ä¸€ä¸ª pointer ç„¶åéšæœºè¯»ï¼Ÿèƒ½ä¸èƒ½åƒ allocator é‚£æ · free/compactï¼Ÿæ˜¯ä¸æ˜¯ mmap + address spaceï¼Ÿâ€

å¦‚æœç­”æ¡ˆç»å¸¸æ˜¯â€œä¸â€ï¼Œé‚£ä¹ˆ **æ–‡æ¡£ä¸ API çš„å‘½åå¿…é¡»è¡¥å¿è¿™ä¸ªåå·®**ã€‚

#### 3) NuGet åŒ…å‘½åä¸ namespaceï¼šä¸è¦æŠŠæœªæ¥è‡ªå·±é”æ­»

è¿™é‡Œæˆ‘å»ºè®®ä¼˜å…ˆè€ƒè™‘ 3 ä¸ªçº¦æŸï¼š
- **NuGet PackageId** ä¸€æ—¦å…¬å¼€å°±å¾ˆéš¾å›å¤´ï¼ˆrename=ç ´åå¼•ç”¨ã€æœç´¢ã€é•œåƒã€SBOMï¼‰ã€‚
- **namespace** ä¸€æ—¦æ‰©æ•£åˆ° public APIï¼Œé‡æ„æˆæœ¬å·¨å¤§ï¼ˆbreaking change + ç±»å‹å†²çªï¼‰ã€‚
- ç‰ˆæœ¬æ¼”è¿›è¦èƒ½è¡¨è¾¾ï¼šv1(v1 mmap heap) ä¸ v2(v2 incremental store) çš„â€œè¯­ä¹‰æ–­è£‚â€ã€‚

ä¸€ä¸ªç¨³å¦¥çš„ç»„åˆç­–ç•¥ï¼ˆä¾›å‚è€ƒï¼Œä¸ä¸€å®šè¦å…¨åšï¼‰ï¼š

- Packageï¼šç”¨ç»„ç»‡å‰ç¼€ + ç¨³å®šå“ç‰Œåã€‚
       - å¦‚æœå½’å± ateliaï¼š`Atelia.DurableHeap`ï¼ˆä¿ç•™å“ç‰Œï¼Œé™ä½ rename æˆæœ¬ï¼‰
       - å¦‚æœæƒ³å¼ºè°ƒæ–°è¯­ä¹‰ã€ä¸”æ„¿æ„æ‰¿æ‹…æ”¹åï¼š`Atelia.DurableStore` æˆ– `Atelia.IncrementalStore`
       - å¼ºçƒˆä¸å»ºè®®ï¼š`DurableHeap2` / `DurableHeapV2` ä½œä¸º PackageIdï¼ˆä¼šæ°¸ä¹…å†™è¿›ä¾èµ–æ ‘ï¼Œçœ‹èµ·æ¥åƒä¸´æ—¶æ–¹æ¡ˆå˜æˆç»ˆèº«æ–¹æ¡ˆï¼‰

- Namespaceï¼šç”¨â€œé¢†åŸŸåˆ†å±‚â€è€Œä¸æ˜¯â€œäº§å“åç›´å¡ä¸€å±‚â€ã€‚ä¾‹å¦‚ï¼š
       - `Atelia.Storage.Durable` / `Atelia.Storage.Incremental`ï¼ˆæŠ€æœ¯åŸŸï¼‰
       - å…·ä½“å®ç°/æ ¼å¼ï¼š`Atelia.Storage.Durable.HeapV2` æˆ– `Atelia.Storage.Durable.FormatV2`

è¿™æ ·åšçš„å¥½å¤„ï¼š
- å°†æ¥ä½ ä»¬å¦‚æœæŠŠ DurableHeap æ¼”è¿›æˆå¤šåç«¯ï¼ˆfile / stream / memory / cloudï¼‰ï¼Œnamespace ä¸éœ€è¦é‡å†™ï¼›
- public API å¯ä»¥ä¿æŒåœ¨ `Atelia.Storage.Durable` ä¸‹ç¨³å®šï¼Œå†…éƒ¨å®ç°/æ ¼å¼ç‰ˆæœ¬åœ¨å­å‘½åç©ºé—´æ»šåŠ¨ã€‚

ï¼ˆå¯¹æ¯”è¡Œä¸šå…ˆä¾‹ï¼š`System.Text.Json` æ²¡æŠŠâ€œUTF8 JSON reader/writerâ€åšæˆ package åï¼›â€œå®ç°ç»†èŠ‚â€æ”¾åˆ°ç±»å‹å±‚è€Œä¸æ˜¯åŒ…å±‚ã€‚ï¼‰

#### 4) ç‰ˆæœ¬ç­–ç•¥ï¼šæŠŠâ€œè¯­ä¹‰æ–­è£‚â€ä½“é¢åœ°è¡¨è¾¾å‡ºæ¥

ä½ ä»¬çš„ v1â†’v2 ä¸æ˜¯â€œåŠ åŠŸèƒ½â€ï¼Œæ˜¯**å¿ƒæ™ºæ¨¡å‹æ¢äº†**ã€‚è¿™åœ¨ç‰ˆæœ¬è¯­ä¹‰ä¸Šåº”è¯¥è¢«å°Šé‡ï¼š
- **NuGet SemVerï¼šmajor bump**ï¼ˆ1.x â†’ 2.0ï¼‰æ˜¯æœ€æ¸…æ™°çš„ä¿¡å·ã€‚
- **æ–‡ä»¶æ ¼å¼ version** è¦ä¸ API version è§£è€¦ï¼š
       - API å¯ä»¥æ˜¯ `Atelia.DurableHeap` 2.x
       - æ ¼å¼å¯ä»¥æ˜¯ `FormatVersion = 2`ï¼ˆæˆ– `StoreVersion = 2`ï¼‰ï¼Œå¹¶ä¸”åœ¨ reader é‡Œæ˜ç¡® unknown version çš„ç­–ç•¥ï¼ˆå»ºè®® fail-fastï¼‰ã€‚

æ­¤å¤–ï¼Œå»ºè®®æ˜ç¡®ä¸€æ¡â€œé•¿æœŸç»´æŠ¤å‹å¥½â€çš„è§„åˆ™ï¼š
- â€œåªè¦è¿˜æ‰¿è¯ºè¯»å–æ—§æ•°æ®ï¼Œå°±å¿…é¡»ä¿ç•™æ—§æ ¼å¼çš„ decode æµ‹è¯•å‘é‡â€ã€‚
- â€œå†™å…¥é»˜è®¤åªå†™æœ€æ–°æ ¼å¼ï¼›æ—§æ ¼å¼å†™å…¥å¯é€‰å¼€å…³ï¼Œä¸”æ˜ç¡® deprecated æœŸé™â€ã€‚

è¿™èƒ½é¿å…æœªæ¥é™·å…¥â€œå…¼å®¹è¯»å†™ä½†æ²¡äººæ•¢æ”¹â€çš„ç»´æŠ¤æ³¥æ½­ã€‚

#### 5) Repo å½’å±ï¼šä»¥ä¾èµ–æ–¹å‘ + å‘å¸ƒèŠ‚å¥ä¸ºå‡†ï¼ˆè€Œä¸æ˜¯ä»¥â€˜è°æ›´éœ€è¦â€™ä¸ºå‡†ï¼‰

æˆ‘åŒæ„ DocUIClaude çš„ç›´è§‰ï¼š**æ”¾ DocUI repo é‡Œä¼šå‡ºç°å±‚çº§åè½¬**ï¼ˆUI å±‚æŒæœ‰å­˜å‚¨å±‚ï¼‰ã€‚ä»å·¥ç¨‹æ²»ç†è§’åº¦ï¼Œæˆ‘ä¼šç”¨ä¸¤æ¡ç¡¬æ ‡å‡†è£å†³ï¼š

1) **ä¾èµ–æ–¹å‘**ï¼šåº•å±‚åº“ä¸åº”ä¾èµ–ä¸Šå±‚ UIï¼ˆé¿å…ç¯ï¼‰ã€‚å¦‚æœ DurableHeap è¢« DocUI ä½¿ç”¨ï¼Œæ­£ç¡®æ–¹å‘æ˜¯ DocUIâ†’DurableHeapï¼Œè€Œä¸æ˜¯åè¿‡æ¥ã€‚
2) **å‘å¸ƒèŠ‚å¥/ç ´åæ€§å˜æ›´åŠå¾„**ï¼šDurableHeap è¿™ç±»åº•å±‚åº“çš„ break ä¼šæ”¾å¤§å½±å“é¢ï¼›å®ƒåº”è¯¥è·Ÿâ€œæœ€ç¨³å®š/æœ€åº•å±‚â€çš„é‚£æ¡ä¸»çº¿èµ°ã€‚

æ®æ­¤æˆ‘çš„å€¾å‘æ’åºï¼š
- **B. åŠ å…¥ atelia**ï¼šå¦‚æœå®ƒä¸»è¦æœåŠ¡ Agent runtime/å†å²å­˜å‚¨ï¼Œå¹¶ä¸”ä¼šä¸ `ChunkedReservableWriter` ä¸€èµ·æ¼”è¿›ï¼Œè¿™æ˜¯æœ€è‡ªç„¶çš„â€œåº•å±‚é›†åˆâ€ã€‚
- **A. ç‹¬ç«‹ repo**ï¼šåªæœ‰åœ¨ä½ ä»¬ç¡®å®šâ€œä¼šæœ‰ atelia/DocUI ä¹‹å¤–çš„çœŸå®æ¶ˆè´¹è€…â€ï¼Œå¹¶ä¸”æ„¿æ„æ‰¿æ‹…ï¼ˆCIã€å‘å¸ƒã€ç‰ˆæœ¬åè°ƒã€issue triageï¼‰æˆæœ¬æ—¶æ‰å€¼å¾—ã€‚
- **C. åŠ å…¥ DocUI**ï¼šé™¤éä½ ä»¬å†³å®šâ€œDurableHeap æœ¬è´¨ä¸Šæ˜¯ DocUI/Agent-OS çš„ä¸€éƒ¨åˆ†åè®®å®ç°â€ï¼Œå¹¶ä¸”åå‘ä¾èµ–ä¸å‘ç”Ÿï¼ˆè¿™å¾ˆéš¾ä¿è¯ï¼‰ï¼Œå¦åˆ™ä¸æ¨èã€‚

ï¼ˆè¡Œä¸šç±»æ¯”ï¼šVS Code æŠŠ LSP æŠ½åˆ°ç‹¬ç«‹ repo çš„å‰ææ˜¯â€œåè®®åŒ– + è·¨ç”Ÿæ€æ¶ˆè´¹â€ã€‚å¦‚æœ DurableHeap æš‚æ—¶ä¸æ˜¯åè®®æ ‡å‡†ï¼Œè€Œæ˜¯æŸå¥— runtime çš„å†…éƒ¨å­˜å‚¨å®ç°ï¼Œç‹¬ç«‹ repo å¤šåŠæ˜¯â€˜æå‰æ ‡å‡†åŒ–â€™ã€‚ï¼‰

#### 6) ä¸€ä¸ªæŠ˜ä¸­è½åœ°å»ºè®®ï¼ˆå‡å°‘äº‰è®®ã€ä¿ç•™æ¼”è¿›ç©ºé—´ï¼‰

å¦‚æœè¦â€œä»Šå¤©å°±èƒ½åšå†³å®šâ€ï¼Œæˆ‘å»ºè®®è¿™ä¸ªæŠ˜ä¸­ï¼š
- Repoï¼šå…ˆæ”¾ **atelia**ï¼ˆBï¼‰ï¼Œè®©ä¾èµ–æ–¹å‘è‡ªç„¶ã€å¼€å‘æ•ˆç‡é«˜ã€‚
- PackageIdï¼šçŸ­æœŸä¿ç•™ `Atelia.DurableHeap`ï¼ˆå“ç‰Œç¨³å®šï¼‰ï¼Œç”¨ `2.0.0` å®£å‘Šè¯­ä¹‰æ–­è£‚ã€‚
- API/ç±»å‹å‘½åï¼šåœ¨ public API ä¸­é¿å… `Heap` è¯­ä¹‰è¯¯å¯¼ï¼ˆä¾‹å¦‚å…¬å¼€ `DurableRecordStore` / `AppendOnlyStore`ï¼‰ï¼Œ`DurableHeap` å¯ä½œä¸ºé¡¶å±‚ faÃ§ade æˆ–å…¼å®¹å…¥å£ã€‚
- æ–‡æ¡£ï¼šåœ¨ README/overview é‡Œç”¨ä¸€å¥è¯é’‰æ­»ï¼š
       - â€œv2 is an append-only incremental object store (not an mmap heap)â€ï¼Œå¹¶æ˜ç¡®è®¿é—®æ¨¡å‹ä¸é™åˆ¶ï¼ˆå®Œæ•´åŠ è½½ã€é¡ºåºè¿½åŠ ã€ç‰ˆæœ¬é“¾ï¼‰ã€‚

è¿™æ ·èƒ½æŠŠäº‰è®®ä»â€œå¿…é¡»æ”¹å/å¿…é¡»ç‹¬ç«‹ repoâ€çš„äºŒé€‰ä¸€ï¼Œé™ç»´æˆï¼š**å“ç‰Œåå…ˆç¨³ä½ï¼ŒæŠ€æœ¯è¯­ä¹‰åœ¨ API/æ–‡æ¡£æ”¶å£**ã€‚

### ä¸»æŒäººï¼ˆUX è§†è§’è¡¥å…… + æ•´åˆï¼‰

Gemini å› æŠ€æœ¯åŸå› ç¼ºå¸­ï¼Œæˆ‘æ¥è¡¥å…… UX/DX è§†è§’ï¼š

#### åå­—çš„ç¬¬ä¸€å°è±¡

| åå­— | å¼€å‘è€…å¿ƒæ™ºæ¨¡å‹ | é£é™© |
|------|---------------|------|
| **DurableHeap** | "åƒ malloc/free çš„æŒä¹…åŒ–å †ï¼Ÿ" | ä¼šæœŸå¾…éšæœºè®¿é—®ã€åœ°å€è¯­ä¹‰ |
| **DurableStore** | "æŸç§æŒä¹…åŒ–å­˜å‚¨" | å¤ªæ³›ï¼Œä¸ä¼ é€’ç‰¹æ€§ |
| **DurableJournal** | "è¿½åŠ æ—¥å¿—ï¼Ÿ" | æ¥è¿‘ä½†ä¸å®Œå…¨å‡†ç¡® |
| **ObjectVault** | "å®‰å…¨ä¿é™©ç®±ï¼Ÿ" | æš—ç¤ºé™æ€ï¼Œä¸å¼ºè°ƒç‰ˆæœ¬ |

**UX æ´å¯Ÿ**ï¼šåå­—æ˜¯ API çš„ç¬¬ä¸€å±‚æ–‡æ¡£ã€‚å¦‚æœåå­—å’Œå®é™…è¡Œä¸ºæœ‰åå·®ï¼Œæ¯ä¸ªæ–°ç”¨æˆ·éƒ½è¦"unlearn"ã€‚

#### ä¸€ä¸ªç–¯ç‹‚æƒ³æ³•ï¼šä¸å¦‚å« **DurableDiff**ï¼Ÿ

æŠ€æœ¯å†…æ ¸æ˜¯ä»€ä¹ˆï¼Ÿ**å¢é‡ diff å­˜å‚¨ + ç‰ˆæœ¬é“¾**ã€‚

```
DurableDiff
    â”œâ”€â”€ å¼ºè°ƒ diff/å¢é‡è¯­ä¹‰
    â”œâ”€â”€ æš—ç¤ºç‰ˆæœ¬å†å²ï¼ˆdiff æ„å‘³ç€"ç›¸å¯¹äºä»€ä¹ˆ"ï¼‰
    â””â”€â”€ ä¸æš—ç¤ºè®¿é—®æ¨¡å¼ï¼ˆheap/store/journalï¼‰
```

æˆ–è€… **DiffStore** / **IncrementalDiff** / **DeltaStore**ï¼Ÿ

---

## ç•…è°ˆæ”¶è·æ•´ç†

### å‘½åæ–¹å‘

| æ–¹æ¡ˆ | æ”¯æŒè€… | ç†ç”± |
|------|--------|------|
| **ä¿ç•™ DurableHeap** | Claude, GPT | å“ç‰Œç¨³å®šï¼Œæ–‡æ¡£/API å±‚ä¿®æ­£è¯­ä¹‰ |
| **æ”¹å DurableStore** | Claude | æ›´é€šç”¨ï¼Œä¸æš—ç¤ºè®¿é—®æ¨¡å¼ |
| **æŠ€æœ¯ååˆ†ç¦»** | GPT | PackageId ä¿æŒï¼ŒAPI ç±»åç”¨å‡†ç¡®è¯­ä¹‰ï¼ˆå¦‚ `IncrementalObjectStore`ï¼‰ |
| **DurableDiff** | ä¸»æŒäºº | å¼ºè°ƒæ ¸å¿ƒæŠ€æœ¯ç‰¹å¾ |

### Repo å½’å±æ–¹å‘

**å…±è¯†å€¾å‘ï¼šé€‰é¡¹ Bï¼ˆåŠ å…¥ ateliaï¼‰**

ç†ç”±ï¼š
1. **ä¾èµ–æ–¹å‘æ­£ç¡®**ï¼šåº•å±‚å­˜å‚¨ â† ä¸Šå±‚åº”ç”¨ï¼ˆDocUIã€Agent Runtimeï¼‰
2. **é¿å… premature generalization**ï¼šæš‚æ— è·¨ç”Ÿæ€æ¶ˆè´¹è€…
3. **å¼€å‘æ•ˆç‡**ï¼šä¸ ChunkedReservableWriter åŒ repoï¼Œæ–¹ä¾¿ååŒæ¼”è¿›

**ä¿ç•™çš„ç–‘è™‘**ï¼š
- å¦‚æœ DocUI ä¹Ÿç‹¬ç«‹ repoï¼Œä¼šå½¢æˆ DocUI â†’ atelia çš„ä¾èµ–ï¼Ÿ
- ä½†è¿™å¯èƒ½æ˜¯æ­£ç¡®çš„ä¾èµ–æ–¹å‘ï¼ˆUI æ¡†æ¶ä¾èµ–åº•å±‚è¿è¡Œæ—¶åº“ï¼‰

---

## å¾…ç›‘æŠ¤äººå†³ç­–

1. **å‘½å**ï¼š
   - [ ] ä¿ç•™ DurableHeapï¼ˆå“ç‰Œä¼˜å…ˆï¼‰
   - [ ] æ”¹å DurableStoreï¼ˆè¯­ä¹‰ä¼˜å…ˆï¼‰
   - [ ] æ”¹å DurableDiffï¼ˆæŠ€æœ¯ç‰¹å¾ä¼˜å…ˆï¼‰
   - [ ] å…¶ä»–ï¼š_______

2. **Repo å½’å±**ï¼š
   - [ ] A. ç‹¬ç«‹ repo
   - [ ] B. åŠ å…¥ ateliaï¼ˆæ¨èï¼‰
   - [ ] C. åŠ å…¥ DocUI

3. **NuGet å‘½åç©ºé—´**ï¼š
   - [ ] `Atelia.DurableHeap`ï¼ˆæ²¿ç”¨å“ç‰Œï¼‰
   - [ ] `Atelia.Storage.Durable`ï¼ˆé¢†åŸŸåˆ†å±‚ï¼‰
   - [ ] å…¶ä»–ï¼š_______

---

## å‘½åä¼—æµ‹å®éªŒï¼ˆ2025-12-21ï¼‰

### æ­£å‘æµ‹è¯•ï¼šåŠŸèƒ½æè¿° â†’ æƒ³åå­—ï¼ˆ5 æ¬¡é‡‡æ ·ï¼‰

**æŠ€æœ¯ç‰¹å¾æè¿°**ï¼š
- æŒä¹…åŒ–å¯¹è±¡å›¾å­˜å‚¨
- å˜é•¿è®°å½•ï¼Œé¡ºåºè¿½åŠ å†™å…¥
- å¢é‡åºåˆ—åŒ–ï¼ˆå­˜å‚¨ state diffï¼‰
- æ”¯æŒç‰ˆæœ¬é“¾ï¼ˆç±»ä¼¼ gitï¼‰
- å¯¹è±¡éœ€è¦å®Œæ•´åŠ è½½åˆ°å†…å­˜
- ç”¨äº Agent è¿è¡Œæ—¶çŠ¶æ€æŒä¹…åŒ–

**é‡‡æ ·ç»“æœç»Ÿè®¡**ï¼š

| åå­— | å‡ºç°æ¬¡æ•° | ç†ç”±å…³é”®è¯ |
|------|----------|-----------|
| **StateJournal** | 5/5 â­ | Journal=è¿½åŠ å†™å…¥+å†å²ï¼ŒState=çŠ¶æ€ |
| **DeltaGraph** | 4/5 | Delta=å¢é‡ï¼ŒGraph=å¯¹è±¡å›¾ |
| **VersionedHeap** | 3/5 | Versioned=ç‰ˆæœ¬é“¾ï¼ŒHeap=å®Œæ•´åŠ è½½ |
| ObjectJournal | 1/5 | Object+Journal |
| DeltaStore | 1/5 | Delta+Store |
| StateChain | 1/5 | State+Chain |
| DurableGraph | 1/5 | Durable+Graph |
| DiffChain | 1/5 | Diff+Chain |

### åå‘æµ‹è¯•ï¼šåå­— â†’ åŠŸèƒ½çŒœæµ‹

| åå­— | ç›´è§‰çŒœæµ‹ | å‡†ç¡®åº¦ |
|------|----------|--------|
| **DeltaGraph** | å­˜å‚¨å›¾ç»“æ„ä¸­èŠ‚ç‚¹/è¾¹çš„å¢é‡å˜åŒ– | âœ… å‡†ç¡® |
| **StateJournal** | è®°å½•çŠ¶æ€å˜æ›´çš„æ—¥å¿—ï¼Œæ”¯æŒçŠ¶æ€å›æº¯ | âœ… å‡†ç¡® |
| **ObjectJournal** | é’ˆå¯¹å¯¹è±¡çº§åˆ«çš„å˜æ›´æ—¥å¿— | âœ… å‡†ç¡® |
| **DeltaStore** | æŒä¹…åŒ–å­˜å‚¨å¢é‡/å·®å¼‚æ•°æ® | âœ… å‡†ç¡® |
| **VersionedHeap** | æ”¯æŒç‰ˆæœ¬æ§åˆ¶çš„å †å†…å­˜ç®¡ç† | âš ï¸ æœ‰åå·®ï¼ˆæš—ç¤º mmapï¼‰ |
| **StateChain** | çŠ¶æ€çš„é“¾å¼ç»“æ„ï¼Œç±»ä¼¼åŒºå—é“¾ | âš ï¸ æœ‰åå·®ï¼ˆåŒºå—é“¾è”æƒ³ï¼‰ |
| **DurableGraph** | æŒä¹…åŒ–çš„å›¾æ•°æ®ç»“æ„ | âš ï¸ ä¸å¼ºè°ƒå¢é‡è¯­ä¹‰ |
| **DiffChain** | å·®å¼‚çš„é“¾å¼å­˜å‚¨ï¼Œé€šè¿‡è¿ç»­åº”ç”¨ diff é‡å»º | âœ… å‡†ç¡® |

### ä¼—æµ‹ç»“è®º

**Top 3 æ¨è**ï¼ˆæŒ‰ç»¼åˆå¾—åˆ†ï¼‰ï¼š

| æ’å | åå­— | æ­£å‘å‡ºç° | åå‘å‡†ç¡® | ç»¼åˆ |
|------|------|----------|----------|------|
| ğŸ¥‡ | **StateJournal** | 5/5 | âœ… | â­â­â­ |
| ğŸ¥ˆ | **DeltaGraph** | 4/5 | âœ… | â­â­â­ |
| ğŸ¥‰ | **DeltaStore** | 1/5 | âœ… | â­â­ |

**ä¼—æµ‹æ´å¯Ÿ**ï¼š
- "Journal" åœ¨å­˜å‚¨é¢†åŸŸæ˜¯æˆç†Ÿæœ¯è¯­ï¼Œæš—ç¤ºè¿½åŠ å†™å…¥+å¯å›æº¯
- "Delta" ç›´æ¥ç‚¹æ˜å¢é‡è¯­ä¹‰ï¼Œè‡ªæ˜æ€§å¼º
- "Heap" è™½ç„¶å‡ºç° 3 æ¬¡ï¼Œä½†åå‘æµ‹è¯•æ˜¾ç¤ºæœ‰"mmap/å†…å­˜"è¯¯å¯¼é£é™©

---

## æœ€ç»ˆæŠ•ç¥¨ï¼šStateJournal vs DeltaGraph

> ç›‘æŠ¤äººæ‰¹ç¤ºï¼šåœ¨è¿™ä¸¤ä¸ªå…¥å›´åå­—ä¸­åšæœ€ç»ˆé€‰æ‹©

### å€™é€‰å¯¹æ¯”

| ç»´åº¦ | StateJournal | DeltaGraph |
|------|--------------|------------|
| **æ­£å‘é‡‡æ ·** | 5/5 å…¨ç¥¨ | 4/5 |
| **æ ¸å¿ƒè¯­ä¹‰** | çŠ¶æ€ + æ—¥å¿—/è¿½åŠ  | å¢é‡ + å¯¹è±¡å›¾ |
| **å¼ºè°ƒç‚¹** | ç”¨ä¾‹ï¼ˆAgent çŠ¶æ€æŒä¹…åŒ–ï¼‰ | æŠ€æœ¯ç‰¹å¾ï¼ˆå¢é‡å¯¹è±¡å›¾ï¼‰ |
| **è¡Œä¸šè”æƒ³** | WALã€Event Sourcing | Git Deltaã€Diff |

### æŠ•ç¥¨è§„åˆ™
- æ¯ä½ Specialist ç®€çŸ­å‘è¨€ï¼ˆ1-2 å¥ç†ç”±ï¼‰
- æŠ•ç¥¨ï¼šâœ… æ”¯æŒ / âŒ åå¯¹
- å¤šæ•°ç¥¨å†³å®šæœ€ç»ˆç»“æœ

---

### æŠ•ç¥¨è®°å½•

**DocUIClaude**ï¼šStateJournal ç›´æ¥ç‚¹æ˜æ ¸å¿ƒç”¨ä¾‹ï¼ˆAgent çŠ¶æ€æŒä¹…åŒ–ï¼‰ï¼Œå¯¹ä½¿ç”¨è€…æ›´å‹å¥½ï¼›DeltaGraph åæŠ€æœ¯å®ç°ï¼Œéœ€è¦å…ˆç†è§£"ä»€ä¹ˆæ˜¯ delta"ã€‚

| åå­— | æŠ•ç¥¨ |
|------|------|
| StateJournal | âœ… |
| DeltaGraph | âŒ |

**DocUIGPT**ï¼šæˆ‘æŠ• StateJournalï¼šå®ƒæŠŠâ€œAgent çŠ¶æ€ + è¿½åŠ å†™/ç‰ˆæœ¬é“¾â€è¿™å±‚ç¨³å®šè¯­ä¹‰è¯´æ¸…æ¥šï¼Œåç»­å®ç°ç»†èŠ‚æ€ä¹ˆæ¼”è¿›éƒ½ä¸å®¹æ˜“è¿‡æ—¶ï¼›DeltaGraph æ›´åƒå†…éƒ¨å®ç°æœ¯è¯­ï¼Œå®¹æ˜“è¯¯å¯¼ä¸ºâ€œå›¾ç®—æ³•/å›¾æ•°æ®åº“â€ã€‚

| åå­— | æŠ•ç¥¨ |
|------|------|
| StateJournal | âœ… |
| DeltaGraph | âŒ |

**DocUIGemini**ï¼šStateJournal å®Œç¾å¥‘åˆ LLM Agent çš„å¿ƒæ™ºæ¨¡å‹ï¼ˆState Management + History/Contextï¼‰ï¼Œ"Journal" å‡†ç¡®ä¼ è¾¾äº†è¿½åŠ å†™å’Œå¯å›æº¯çš„ç‰¹æ€§ï¼Œè¿™å¯¹è°ƒè¯•å’Œ Time-Travel è‡³å…³é‡è¦ã€‚

| åå­— | æŠ•ç¥¨ |
|------|------|
| StateJournal | âœ… |
| DeltaGraph | âŒ |

---

## ğŸ‰ æœ€ç»ˆç»“æœ

### æŠ•ç¥¨ç»Ÿè®¡

| åå­— | DocUIClaude | DocUIGPT | DocUIGemini | æ€»è®¡ |
|------|-------------|----------|-------------|------|
| **StateJournal** | âœ… | âœ… | âœ… | **3/3** |
| DeltaGraph | âŒ | âŒ | âŒ | 0/3 |

### å†³è®®

**ğŸ† StateJournal å…¨ç¥¨é€šè¿‡ï¼**

**æœ€ç»ˆå‘½å**ï¼š`Atelia.StateJournal`

**ç†ç”±å…±è¯†**ï¼š
1. ç›´æ¥ç‚¹æ˜æ ¸å¿ƒç”¨ä¾‹ï¼ˆAgent çŠ¶æ€æŒä¹…åŒ–ï¼‰
2. "Journal" å‡†ç¡®ä¼ è¾¾è¿½åŠ å†™ + å¯å›æº¯ç‰¹æ€§
3. å¯¹ä½¿ç”¨è€…æ›´å‹å¥½ï¼Œä¸éœ€è¦å…ˆç†è§£å®ç°ç»†èŠ‚
4. ç¨³å®šè¯­ä¹‰ï¼Œåç»­å®ç°æ¼”è¿›ä¸å®¹æ˜“è¿‡æ—¶

---

## ä¼šè®®ç»“è®º

| å†³ç­–é¡¹ | ç»“æœ |
|--------|------|
| **é¡¹ç›®å‘½å** | StateJournal |
| **Namespace** | `Atelia.StateJournal` |
| **Repo å½’å±** | åŠ å…¥ ateliaï¼ˆé€‰é¡¹ Bï¼‰ |
| **ç›®å½•ä½ç½®** | `atelia/src/StateJournal/` |

> El Psy Kongroo. ğŸ¯