# å¦‚ä½•å¸¦é˜ŸæŒ‰é˜¶æ®µå®æ–½ Wish

> **é€‚ç”¨åœºæ™¯**ï¼šä¸­å¤§å‹åŠŸèƒ½å¼€å‘ï¼Œéœ€è¦å¤šä¸ª Stage åˆ†é˜¶æ®µäº¤ä»˜
> **è§’è‰²**ï¼šTeam Leaderï¼ˆè°ƒåº¦ï¼‰+ Specialistï¼ˆæ‰§è¡Œï¼‰
> **ç»éªŒæ¥æº**ï¼šW-0009-rbf å®è·µï¼ˆ2026-01-14ï¼‰

---

## æ ¸å¿ƒæ¦‚å¿µ

### ä¸‰æ–‡æ¡£æ¨¡å‹

| æ–‡æ¡£ | èŒè´£ | æ›´æ–°é¢‘ç‡ |
|:-----|:-----|:---------|
| `recap.md` | **å‰æƒ…æè¦**â€”â€”å·²å®Œæˆçš„äº¤ä»˜æˆæœã€å½“å‰çŠ¶æ€ã€åŸºç¡€æ¡ä»¶ | æ¯ä¸ª Task å®Œæˆå |
| `blueprint.md` | **åŠ¨æ€è“å›¾**â€”â€”æ–½å·¥é˜¶æ®µè§„åˆ’ã€æ¼”è¿›æ–¹å‘ | æ¯ä¸ª Stage å®Œæˆå |
| `stage/XX/task.md` | **ä»»åŠ¡ç®€æŠ¥**â€”â€”å½“å‰ Stage çš„ Task åˆ—è¡¨ã€æ‰§è¡Œè®°å½• | Stage ç”Ÿå‘½å‘¨æœŸå†… |

### Stage ä¸ Task çš„å…³ç³»

```
Wish
â”œâ”€â”€ Stage 01ï¼ˆå†…èšçš„äº¤ä»˜å•å…ƒï¼‰
â”‚   â”œâ”€â”€ Task 1.1ï¼ˆå•æ¬¡ runSubagent å¯å®Œæˆï¼‰
â”‚   â”œâ”€â”€ Task 1.2
â”‚   â””â”€â”€ Task 1.3
â”œâ”€â”€ Stage 02
â”‚   â”œâ”€â”€ Task 2.1
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

**åŸåˆ™**ï¼š
- **Stage** = é«˜å†…èšçš„äº¤ä»˜å•å…ƒï¼Œå®Œæˆå `recap.md` å’Œ `blueprint.md` æ›´æ–°
- **Task** = å•æ¬¡ `runSubagent` å¯å®Œæˆçš„åŸå­ä»»åŠ¡

---

## å·¥ä½œæµç¨‹

### Phase 1: åˆ›å»º Task è§„åˆ’

1. **é˜…è¯»ä¸Šä¸‹æ–‡**ï¼š
   - `recap.md` â€” äº†è§£å½“å‰åŸºç¡€æ¡ä»¶
   - `blueprint.md` â€” äº†è§£å½“å‰é˜¶æ®µç›®æ ‡
   - ç›¸å…³è®¾è®¡æ–‡æ¡£

2. **åˆ›å»º `stage/XX/task.md`**ï¼š
   - ä» `blueprint.md` åˆ‡ä¸‹å½“å‰ Stage çš„ç›®æ ‡
   - åˆ†è§£ä¸ºè‹¥å¹² Taskï¼ˆå»ºè®® **æ¯æ¬¡ runSubagent åªæ‰§è¡Œ 1 ä¸ª Task**ï¼‰
   - æ˜ç¡®æ¯ä¸ª Task çš„äº§å‡ºå’ŒéªŒæ”¶æ ‡å‡†

3. **Task Review**ï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼š
   - è°ƒç”¨ `Craftsman` å®¡é˜… Task è§„åˆ’
   - ä¿®æ­£è§„èŒƒé—æ¼ã€è¾¹ç•Œæ¡ä»¶ã€ä¾èµ–å…³ç³»

### Phase 2: è¿­ä»£æ‰§è¡Œ Task

å¯¹æ¯ä¸ª Task æ‰§è¡Œä»¥ä¸‹å¾ªç¯ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è°ƒç”¨ Implementer æ‰§è¡Œå•ä¸ª Task        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. éªŒè¯ç»“æœï¼ˆdotnet build/testï¼‰         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. æ›´æ–° task.md æ‰§è¡Œè®°å½•                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. æ›´æ–° recap.mdï¼ˆå¦‚æœ‰é‡è¦è¿›å±•ï¼‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: Stage æ”¶å°¾

1. **Code Review**ï¼š
   - é€šè¿‡ `git diff` è·å–å˜æ›´
   - è°ƒç”¨ `Craftsman` å®¡é˜…ä»£ç 
   - ä¿®å¤ Major é—®é¢˜

2. **æ›´æ–°çŠ¶æ€æ–‡æ¡£**ï¼š
   - `recap.md`ï¼šå‹ç¼©ç»†èŠ‚ï¼Œä¿ç•™åæ•ˆæ€§ä¿¡æ¯
   - `blueprint.md`ï¼šæ ‡è®° Stage å®Œæˆï¼Œè°ƒæ•´åç»­è§„åˆ’
   - `task.md`ï¼šè¡¥å…… Review æ€»ç»“

---

## runSubagent è°ƒç”¨æ¨¡æ¿

### å• Task æ‰§è¡Œï¼ˆæ¨èï¼‰

```
## ä»»åŠ¡èƒŒæ™¯
ä½ æ­£åœ¨å®ç° [é¡¹ç›®å] çš„ Stage XX: [Stage åç§°]ã€‚

## ä¸Šä¸‹æ–‡æ–‡ä»¶
1. **Task æ–‡ä»¶**ï¼š`wish/W-XXXX/stage/XX/task.md` - æŸ¥çœ‹ Task X.Y çš„è¦æ±‚
2. **å‰æƒ…æè¦**ï¼š`wish/W-XXXX/recap.md` - äº†è§£å½“å‰çŠ¶æ€
3. **è®¾è®¡æ–‡æ¡£**ï¼š`path/to/design.md` - ç›¸å…³è§„èŒƒ

## æœ¬æ¬¡ä»»åŠ¡
æ‰§è¡Œ **Task X.Y: [Task åç§°]**

[å¤åˆ¶ task.md ä¸­è¯¥ Task çš„å®Œæ•´å†…å®¹]

## éªŒæ”¶æ ‡å‡†
- [å…·ä½“éªŒæ”¶æ¡ä»¶]

## è¾“å‡ºè¦æ±‚
å®ŒæˆåæŠ¥å‘Šï¼šåˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶ã€æ„å»º/æµ‹è¯•ç»“æœã€æ³¨æ„äº‹é¡¹
```

### Task Review

```
## ä»»åŠ¡ï¼šå®¡é˜… Stage XX Task è§„åˆ’

è¯·å®¡é˜… `wish/W-XXXX/stage/XX/task.md` ä¸­çš„ Task è§„åˆ’ã€‚

## å®¡é˜…é‡ç‚¹
1. è§„èŒƒå¯¹é½ï¼šæ˜¯å¦è¦†ç›–ç›¸å…³ decision/spec æ¡æ¬¾ï¼Ÿ
2. ä»»åŠ¡åˆ†è§£ï¼šç²’åº¦æ˜¯å¦é€‚åˆå•æ¬¡ runSubagentï¼Ÿ
3. è¾¹ç•Œæ¡ä»¶ï¼šæ˜¯å¦æœ‰é—æ¼çš„å¼‚å¸¸è·¯å¾„ï¼Ÿ
4. ä¾èµ–å…³ç³»ï¼šTask ä¹‹é—´çš„ä¾èµ–æ˜¯å¦æ¸…æ™°ï¼Ÿ

## å¯¹ç…§æ–‡æ¡£
- [åˆ—å‡ºç›¸å…³è®¾è®¡æ–‡æ¡£]

## è¾“å‡ºæ ¼å¼
è¾“å‡º FixListï¼šé—®é¢˜æè¿° + å»ºè®®æ–¹æ¡ˆ + ä¸¥é‡ç¨‹åº¦
```

### Code Review

```
## ä»»åŠ¡ï¼šä»£ç å®¡é˜…

è¯·å¯¹ `path/to/repo` ä¸­çš„æœ€æ–°å˜æ›´è¿›è¡Œä»£ç å®¡é˜…ã€‚

## å·¥ä½œæµç¨‹
1. è¿è¡Œ `git diff` æŸ¥çœ‹å˜æ›´
2. å¯¹ç…§è®¾è®¡æ–‡æ¡£å®¡é˜…

## å®¡é˜…é‡ç‚¹
- [Stage ç‰¹å®šæ£€æŸ¥ç‚¹]
- å‘½åè§„èŒƒã€é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†

## è¾“å‡º
å°†å®¡é˜…æŠ¥å‘Šå†™å…¥ `agent-team/handoffs/YYYY-MM-DD-xxx-review.md`
```

---

## ç»éªŒæ•™è®­

### âœ… æœ‰æ•ˆå®è·µ

1. **Task ç²’åº¦è¦å°**ï¼šæ¯ä¸ª Task åªåšä¸€ä»¶äº‹ï¼ŒrunSubagent æˆåŠŸç‡æ›´é«˜
2. **åŒé‡ Review**ï¼šTask Review + Code Review èƒ½æœ‰æ•ˆæ•è·ä¸åŒå±‚é¢çš„é—®é¢˜
3. **å¤±è´¥è·¯å¾„ä¼˜å…ˆ**ï¼šåœ¨ Task è§„åˆ’æ—¶å°±åˆ—å‡ºè¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸åœºæ™¯
4. **æŒ‰å­—èŠ‚æ–­è¨€**ï¼šæµ‹è¯•ä¸ä¾èµ–å†…éƒ¨å¸¸é‡ï¼Œç›´æ¥æ–­è¨€æœŸæœ›çš„å­—èŠ‚å€¼

### âŒ è¸©è¿‡çš„å‘

1. **`Path.GetTempFileName()` é™·é˜±**ï¼šè¯¥æ–¹æ³•ä¼šåˆ›å»ºæ–‡ä»¶ï¼Œå¯¼è‡´ FailIfExists æµ‹è¯•å¤±è´¥
2. **å¸¸é‡è¿‡æ—© public**ï¼šinternal ä¼˜å…ˆï¼Œé¿å… API surface æ±¡æŸ“
3. **æœªæ ¡éªŒæ ¹ä¸å˜é‡**ï¼šç³»ç»Ÿå…¥å£åº”å°½æ—©æ ¡éªŒå…³é”®ä¸å˜é‡ï¼ˆå¦‚ 4B å¯¹é½ï¼‰
4. **ä¸€æ¬¡æ‰§è¡Œå¤šä¸ª Task**ï¼šå®¹æ˜“å¯¼è‡´ runSubagent è¾“å‡ºè¿‡é•¿æˆ–éƒ¨åˆ†å¤±è´¥

### ğŸ”§ Craftsman é™æµå›é€€

å½“ `Craftsman` è¢« Rate Limit æ—¶ï¼Œä½¿ç”¨ `Craftsman.OpenRouter` æ›¿ä»£ã€‚

---

## æ–‡ä»¶æ¨¡æ¿

### recap.md æ¨¡æ¿

```markdown
# [é¡¹ç›®å] å®ç°å‰æƒ…æè¦

> æœ¬æ–‡æ¡£è®°å½•å®ç°çš„å½“å‰çŠ¶æ€å’Œå·²å®Œæˆçš„äº¤ä»˜æˆæœã€‚
> **ç»´æŠ¤è€…**ï¼šæ¯ä¸ª Task å®Œæˆåç”±æ‰§è¡Œè€…æ›´æ–°ã€‚

---

## å½“å‰çŠ¶æ€

**é˜¶æ®µ**ï¼šStage XX - [åç§°] [çŠ¶æ€]

**ä¸‹ä¸€é˜¶æ®µ**ï¼šStage YY - [åç§°]

**åŸºç¡€æ¡ä»¶**ï¼š
- [åˆ—å‡ºæ ¸å¿ƒä¾èµ–å’Œå‰ç½®æ¡ä»¶]

---

## å·²å®Œæˆçš„äº¤ä»˜æˆæœ

### Stage XX: [åç§°]ï¼ˆæ—¥æœŸï¼‰
[äº¤ä»˜å†…å®¹æ‘˜è¦]

---

## å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ |
|------|------|
| YYYY-MM-DD | [å˜æ›´æè¿°] |
```

### blueprint.md æ¨¡æ¿

```markdown
# [é¡¹ç›®å] å®ç°è“å›¾

> æœ¬æ–‡æ¡£æ˜¯å®ç°çš„**åŠ¨æ€è“å›¾**â€”â€”è®°å½•é˜¶æ®µæ€§æ–½å·¥æ–¹æ¡ˆä¸æ¼”è¿›æ–¹å‘ã€‚
> éšç€å®ç°æ¨è¿›ï¼Œå·²å®Œæˆçš„ Stage ä¼šè¢«å‹ç¼©æˆ–ç§»é™¤ï¼Œæ–°çš„æ´å¯Ÿä¼šè¡¥å……è¿›æ¥ã€‚
> **ç»´æŠ¤è€…**ï¼šæ¯ä¸ª Stage å®Œæˆåç”±æ‰§è¡Œè€…æ›´æ–°ã€‚

---

## æ–½å·¥é˜¶æ®µï¼ˆStageï¼‰

### Stage 01: [åç§°]
**ç›®æ ‡**ï¼š[ä¸€å¥è¯ç›®æ ‡]

**äº¤ä»˜ç‰©**ï¼š
- [å…·ä½“äº§å‡º]

---

## æ¼”è¿›æ–¹å‘ï¼ˆBacklogï¼‰

> ä»¥ä¸‹ä¸º MVP ä¹‹åçš„æ½œåœ¨æ¼”è¿›æ–¹å‘ã€‚

- **P2**ï¼š[ä¼˜å…ˆçº§è¾ƒé«˜çš„æ‰©å±•]
- **P3**ï¼š[ä¼˜å…ˆçº§è¾ƒä½çš„æ‰©å±•]

---

## å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ |
|------|------|
| YYYY-MM-DD | [å˜æ›´æè¿°] |
```

### task.md æ¨¡æ¿

```markdown
# Stage XX: [åç§°]

> **ç›®æ ‡**ï¼š[ä¸€å¥è¯ç›®æ ‡]
> **éªŒæ”¶æ ‡å‡†**ï¼š[å¦‚ä½•åˆ¤æ–­ Stage å®Œæˆ]

---

## ä¸Šä¸‹æ–‡æ–‡ä»¶

- **å‰æƒ…æè¦**ï¼š`wish/W-XXXX/recap.md`
- **å®ç°è“å›¾**ï¼š`wish/W-XXXX/blueprint.md`
- **è®¾è®¡æ–‡æ¡£**ï¼š`path/to/design.md`

---

## Task åˆ—è¡¨

### Task X.1: [åç§°]

**æ‰§è¡Œè€…**ï¼šImplementer
**ä¾èµ–**ï¼š[å¦‚æœ‰]

**ä»»åŠ¡ç®€æŠ¥**ï¼š
[ä»»åŠ¡æè¿°]

**äº§å‡º**ï¼š
- [å…·ä½“äº§å‡º]

**éªŒæ”¶**ï¼š[éªŒæ”¶æ¡ä»¶]

---

## æ‰§è¡Œè®°å½•

| Task | çŠ¶æ€ | æ‰§è¡Œè€… | å¤‡æ³¨ |
|------|------|--------|------|
| X.1 | â³ å¾…æ‰§è¡Œ | - | - |

---

## å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ |
|------|------|
| YYYY-MM-DD | åˆå§‹ç‰ˆæœ¬ |
```

---

## ç›¸å…³æ–‡æ¡£

- [Wish ç³»ç»Ÿè§„èŒƒ](../../wish/W-0001-wish-bootstrap/library/specs/wish-system-rules.md)
- [Artifact-Tiers](../wiki/artifact-tiers.md)
- [W-0009-rbf](../../wish/W-0009-rbf/wish.md) â€” æœ¬ Recipe çš„å®è·µæ¥æº
