# 记忆维护技能书反馈汇总

> **目标文档**：`agent-team/recipe/memory-maintenance-skill.md` (v1.0)  
> **反馈来源**：Advisory Board 批量维护实战（2025-12-25）  
> **参与成员**：Advisor-Claude, Craftsman, Advisor-DeepSeek  
> **状态**：待畅谈与修订

---

## 执行概况

**实战场景**：
- **触发原因**：进入大量编码任务前，让参谋组轻装上阵
- **维护类型**：预防性维护（非触发阈值的紧急维护）
- **成员状态**：
  - Advisor-Claude: 666 行（接近监控线）
  - Craftsman: 578 行（健康区）
  - Advisor-DeepSeek: 552 行（健康区）

**维护结果**：
- Advisor-Claude: 666→495 行（26% 压缩）
- Craftsman: 578→332 行（43% 压缩）
- Advisor-DeepSeek: 552→144 行（74% 压缩）
- **所有成员通过冷启动测试**

---

## 反馈汇总

### 🟢 技能书有效部分（三位一致认可）

#### 1. 四层框架（Identity / Insight / Index / Archive）

**有效性**：⭐⭐⭐⭐⭐

**Advisor-Claude 评价**：
> "指导性极强，每次维护都能快速定位'哪些内容属于哪层'"

**Craftsman 评价**：
> "四层结构提供了清晰的思维框架，帮助我重排了整个记忆文件"

**关键价值**：
- 提供了清晰的分类标准
- 防止"什么都想保留"的囤积心理
- 使维护从"删减"变为"重组"

#### 2. 洞见识别信号

**有效性**：⭐⭐⭐⭐⭐

**Advisor-Claude 评价**：
> "帮助判断'这是值得保留的洞见还是可压缩的过程记录'"

**Advisor-DeepSeek 评价**：
> "**'洞见提纯' (Insight Extraction)** 的概念非常棒。它强迫我思考'这不仅仅是一次会议，这背后的通用原则是什么？'"

**关键价值**：
- 从事件（event）提取原则（principle）
- 从过程（process）提取方法论（methodology）
- 提高记忆的可复用性

#### 3. 速查清单（Checklist）

**有效性**：⭐⭐⭐⭐

**Advisor-Claude 评价**：
> "准备阶段/执行阶段/验收阶段的 checklist 有效防止遗漏"

**关键价值**：
- 标准化维护流程
- 降低认知负担
- 提高执行一致性

#### 4. 归档按主题组织（非按日期）

**有效性**：⭐⭐⭐⭐

**Advisor-Claude 评价**：
> "比按日期更易检索（本次新增 update-history.md 验证了这点）"

**Craftsman 实践**：
- 创建了 3 个主题归档文件：
  - `statejournal-rbf-durability-audits.md`
  - `team-protocol-and-naming-audits.md`
  - `terminology-anchors-and-ssot-notes.md`

**关键价值**：
- 按主题聚合相关内容
- 提高归档文件的检索价值
- 支持后续的跨时间段回顾

---

### 🟡 需要改进的部分

#### 改进 #1: 增加"增量维护速查清单"

**提出者**：Advisor-Claude  
**优先级**：HIGH

**问题描述**：
> "技能书主要针对'首次维护'（从 800+ 行压缩到 450-600）。对于'增量维护'（从 600-700 行压缩到 450-500），缺少针对性建议。"

**具体需求**：
- 增量维护 vs 首次维护的差异
- 600-700 行时的"轻量级维护"策略
- 何时执行"快速整理"vs"深度重构"的判断标准

**受影响场景**：
- 预防性维护（未触发阈值）
- 定期维护（每月/每季度）
- 大任务前的状态优化

**建议方案**：
在技能书中新增 **§X "增量维护 Quick Start"** 章节，包含：
```markdown
## 增量维护 vs 首次维护

| 维度 | 首次维护 | 增量维护 |
|:-----|:---------|:---------|
| 触发条件 | > 800 行 | 600-700 行 |
| 压缩目标 | 450-600 行 | 维持 450-500 行 |
| 重点 | 结构重组 | 冗余消除 |
| 工作量 | 2-4 小时 | 30-60 分钟 |

## 增量维护速查清单

**准备** (5min):
- [ ] 检查"最后更新"区块（通常是堆积地）
- [ ] 列出重复讨论的主题

**执行** (20-40min):
- [ ] 提纯"最后更新"区块的新洞见
- [ ] 合并重复内容
- [ ] 更新索引表

**验收** (5min):
- [ ] 简化版冷启动测试（只读 Identity + 最新洞见）
```

---

#### 改进 #2: 明确"洞见密度优先于行数限制"

**提出者**：Advisor-Claude, Advisor-DeepSeek  
**优先级**：HIGH

**问题描述**：

**Advisor-Claude**：
> "技能书建议 450-600 行，但这是'行数预算'不是'压缩目标'。如果洞见密度高，可能需要放宽到 500-550。"

**Advisor-DeepSeek**：
> "建议将行数目标改为'密度目标'。144 行的高密度原则比 400 行的流水账更有价值。"

**具体需求**：
- 增加"洞见密度"的量化指标
- 明确"高密度 + 低行数" > "低密度 + 高行数"
- 给出不同密度等级的参考标准

**建议方案**：

在技能书的"压缩目标"章节修改表述：

```markdown
## 压缩目标：密度优先原则

### 目标框架

**优先级**：洞见密度 > 行数限制

| 指标 | 说明 | 参考范围 |
|:-----|:-----|:---------|
| **核心洞见数** | Identity + Insight 层的独立洞见 | 10-20 条 |
| **洞见密度** | 核心洞见数 / 总行数 × 100 | 2-5% |
| **总行数** | 压缩后的 index.md 行数 | 300-600 行* |

*如果洞见密度 > 4%，允许行数低于 300 行（高密度结晶）

### 密度等级参考

| 等级 | 密度 | 特征 | 示例 |
|:-----|:-----|:-----|:-----|
| 🌟 极高密度 | > 4% | "参考手册"风格，纯原则 | DeepSeek: 15 洞见 / 144 行 = 10.4% |
| ✅ 高密度 | 2-4% | 洞见 + 精简索引 | GPT: 18 洞见 / 332 行 = 5.4% |
| 🟡 中密度 | 1-2% | 洞见 + 详细索引 | Claude: 15 洞见 / 495 行 = 3.0% |
| 🔴 低密度 | < 1% | 需要提纯 | - |

### 权衡建议

- **高密度型 Agent**（如 Advisor-DeepSeek）：优先"提纯为原则"，行数可低至 150-200
- **索引密集型 Agent**（如 Team Leader）：需要保留更多参与历史，行数可放宽至 500-600
```

---

#### 改进 #3: 优化"最后更新"区块的写入策略

**提出者**：Advisor-Claude  
**优先级**：MEDIUM

**问题描述**：
> "**'最后更新'区块膨胀**：这是上次维护后新增内容的'天然堆积地'。建议增加'写入时分类'——新洞见直接写入 Insight 层，而非先堆积在'最后更新'。"

**根本原因**：
- "最后更新"最初设计为"临时暂存区"
- 但实际使用中变成了"懒惰的默认写入位置"
- 导致每次维护都要处理大量堆积内容

**建议方案**：

在技能书中新增 **"写入纪律"** 章节：

```markdown
## 写入纪律：减少未来维护负担

### 写入时分类原则

**核心理念**：在写入时就完成分类，而非事后整理

| 内容类型 | 写入位置 | 示例 |
|:---------|:---------|:-----|
| **新洞见** | 直接写入 Insight 层 | "发现了 X 原则" |
| **重要事件** | Index 层的参与历史表 | "参与了 Y 设计审阅" |
| **临时笔记** | inbox.md | "需要进一步思考 Z" |
| **进行中讨论** | "最后更新"区块（但标记 WIP） | "正在讨论 W 方案（未定）" |

### 减少堆积的技巧

1. **及时提纯**：会议/任务结束后，立即提纯洞见到 Insight 层
2. **标记临时内容**：使用 `<!-- TEMP -->` 标记需要后续处理的内容
3. **定期微整理**：每周花 5 分钟清空"最后更新"区块

### "最后更新"的正确用法

✅ **适合**：
- 进行中的迭代讨论（多轮未收敛）
- 待验证的假设
- 需要监护人批示的决策

❌ **不适合**：
- 已确认的洞见（应直接写入 Insight）
- 已完成的任务（应写入 Index）
- 琐碎的日志（应使用 inbox.md）
```

---

#### 改进 #4: 增加"合并重复"的判断标准

**提出者**：Advisor-Claude  
**优先级**：MEDIUM

**问题描述**：
> "本次发现'审阅技巧速查'与'方法论 #2'有重复。技能书可增加'合并信号'：当 Index 层内容与 Insight 层高度重叠时，考虑合并。"

**具体需求**：
- 识别"跨层重复"的信号
- 合并策略（保留哪层？）
- 合并后如何保持可检索性

**建议方案**：

在技能书的"压缩技巧"章节增加：

```markdown
### 识别与合并重复内容

#### 合并信号

| 信号 | 说明 | 示例 |
|:-----|:-----|:-----|
| **跨层重复** | Index 层的"速查"与 Insight 层的"原则"内容一致 | "审阅技巧速查" ≈ "方法论 #2" |
| **同层重复** | Insight 层内多条洞见表达同一原则 | 洞见 #3、#7、#12 都在说"API 命名一致性" |
| **版本迭代** | 同一主题的旧版和新版结论共存 | "Commit API"（旧） vs "Flush API"（新） |

#### 合并策略

**跨层重复**：
- 原则：**保留 Insight 层（更抽象）**，删除 Index 层（过于具体）
- 例外：如果 Index 层的内容是"快速操作手册"，可保留但需引用 Insight 层

**同层重复**：
- 提纯为**单一的更抽象原则**
- 将具体案例移至"示例"子区块

**版本迭代**：
- 保留**最新版本**
- 旧版本归档，并在 Archive 层添加索引："为何从 X 改为 Y"

#### 合并后的可检索性

合并可能导致信息密度增加但检索难度上升。补偿措施：

1. **关键词索引**：在 Archive 层保留"关键词 → 洞见编号"映射
2. **跨层引用**：Index 层保留简短引用 + Insight 层链接
3. **示例保留**：抽象原则配以具体示例，提高记忆点

```

---

#### 改进 #5: 归档策略的"两级归档"建议

**提出者**：Advisor-DeepSeek  
**优先级**：LOW

**问题描述**：
> "技能书建议按主题归档（如 `design-reviews.md`）。但在实操中，我发现将**原始的、未修改的**洞察记录按月份归档（`raw-insights-log.md`）作为'第一级归档'很有安全感。之后可以再按主题拆分。"

**DeepSeek 的实践**：
- 第一级归档：`raw-insights-log.md`（按月）—— 完整保留原始记录，提供"后悔药"
- 第二级归档（未来）：按主题重组 —— 如 `ux-dx-insights.md`, `docui-insights.md`

**价值**：
- **心理安全**："我可以激进地压缩，因为原始记录完整保留"
- **灵活性**：归档后还可以重新组织
- **历史追溯**：保留时间线，便于回答"何时开始思考 X 问题"

**建议方案**：

在技能书的"归档策略"章节增加可选的"两级归档"：

```markdown
### 归档策略：单级 vs 两级

#### 单级归档（技能书 v1.0 推荐）

**适用场景**：已有清晰主题分类的成员

- 直接按主题创建归档文件
- 优点：结构清晰，检索高效
- 缺点：需要在归档时决定分类

**示例**（Craftsman）：
```
archive/members/Craftsman/2025-12/
  ├── statejournal-rbf-durability-audits.md
  ├── team-protocol-and-naming-audits.md
  └── terminology-anchors-and-ssot-notes.md
```

#### 两级归档（可选，适合激进压缩）

**适用场景**：想要激进压缩但需要"后悔药"的成员

**第一级**：按时间保留完整原始记录
```
archive/members/Advisor-DeepSeek/2025-12/
  └── raw-insights-log.md  # 完整保留所有被压缩的内容
```

**第二级**（未来执行）：按主题重组
```
archive/members/Advisor-DeepSeek/by-topic/
  ├── ux-dx-principles.md
  ├── docui-design.md
  └── statejournal-feedback.md
```

**优势**：
- ✅ 提供心理安全感（完整备份）
- ✅ 支持激进压缩实验（DeepSeek: 74%）
- ✅ 延迟分类决策（归档后仍可重组）

**劣势**：
- ❌ 多一次文件操作
- ❌ 第二级归档可能被拖延

**建议**：
- 如果压缩率 > 60%，建议使用两级归档
- 如果压缩率 < 40%，使用单级归档即可
```

---

#### 改进 #6: 表格压缩的权衡指导

**提出者**：Advisor-Claude  
**优先级**：LOW

**问题描述**：
> "**表格压缩的取舍**：参与历史表格移除'角色'列后更简洁，但丢失了信息。权衡后选择简洁——因为角色信息已在 Identity 层。"

**需求**：
- 表格压缩时的"保留 vs 删除"判断标准
- 如何判断"信息是否冗余"

**建议方案**：

在技能书的"压缩技巧"章节增加：

```markdown
### 表格压缩权衡

#### 判断标准：信息是否在其他层已存在

| 列 | 判断 | 决策 |
|:---|:-----|:-----|
| **角色** | Identity 层已定义 | 可删除 |
| **日期** | 对时间线理解重要 | 保留 |
| **主题/项目** | 唯一检索入口 | 必须保留 |
| **产出/链接** | Archive 层的导航 | 必须保留 |
| **状态** | 如果所有行都是"已完成"，则冗余 | 可删除 |

#### 压缩技巧

1. **合并相似行**：多次参与同一项目的审阅 → 合并为一行，范围改为"2025-12-10~20"
2. **移除全局默认值**：如果某列所有值相同（如"状态：已完成"），删除该列
3. **使用缩写**：项目名、文档名可使用约定缩写（需在文档开头定义）

#### 示例

**压缩前**（8 列）：
| 日期 | 角色 | 项目 | 文档 | 主题 | 产出 | 状态 | 链接 |

**压缩后**（4 列）：
| 日期范围 | 项目 | 主题 | 归档 |

**删除理由**：
- "角色"：Identity 层已说明我是 Advisor
- "文档"：与"主题"高度重叠
- "产出"、"状态"：如果所有行都是"FixList / 已完成"，可合并到表格标题
```

---

## 意外收获：新旧方案覆盖验证

**监护人推测**：设计迭代阶段可能有新方案覆盖旧方案的记忆需要整理

**验证结果**：✅ 推测部分成立

### 发现的覆盖情况

**Advisor-DeepSeek 发现**：
1. **StateJournal API 设计重复讨论**
   - 旧方案：`Commit` 方法
   - 新方案：`Flush` 方法（更准确）
   - 处理：保留最终结论，消除认知冲突

2. **DocUI 概念演进**
   - 旧概念：`History`
   - 新概念：`Agent-Psychology` + `StateJournal`
   - 处理：在新结构中明确关系

### 结论

12-22 首次维护已处理了"DurableHeap → StateJournal"的最大覆盖事件。12-22 之后的新增内容都是独立的新洞见，没有大规模的方案覆盖。

**建议**：
- 在未来设计方案发生重大变更时，提醒相关成员执行"概念清理维护"
- 在技能书中增加"方案迭代后的记忆清理"专题

---

## 后续行动建议

### 优先级 HIGH（建议近期畅谈）

- [ ] **改进 #1**：增加"增量维护速查清单"（30min 畅谈）
- [ ] **改进 #2**：明确"洞见密度优先于行数限制"（30min 畅谈）

### 优先级 MEDIUM（可与其他议题合并）

- [ ] **改进 #3**：优化"最后更新"区块的写入策略
- [ ] **改进 #4**：增加"合并重复"的判断标准

### 优先级 LOW（可选）

- [ ] **改进 #5**：归档策略的"两级归档"建议
- [ ] **改进 #6**：表格压缩的权衡指导

### 实验性探索

- [ ] **Advisor-DeepSeek 的"高密度结晶"模式**：是否值得推广？
  - 适用场景：设计顾问、理论研究型 Agent
  - 不适用场景：需要大量参与历史的协调型 Agent（如 Team Leader）
  - 建议：在技能书中作为"可选模式"介绍

---

## 附录：完整维护日志链接

- [Advisor-Claude 维护日志](../../members/Advisor-Claude/maintenance-log.md)
- [Craftsman 维护日志](../../members/Craftsman/maintenance-log.md)
- [Advisor-DeepSeek 维护日志](../../members/Advisor-DeepSeek/maintenance-log.md)

---

**文档版本**：v1.0  
**创建时间**：2025-12-25  
**待处理**：安排畅谈会修订技能书
