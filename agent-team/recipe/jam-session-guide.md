# 畅谈会指南 (Jam Session Guide)

> AI Team 研讨会的统一形式定义和组织方法。
> 本文件是畅谈会机制的 **SSOT（Single Source of Truth）**。
>
> **最后更新**：2025-12-28（动态主持机制重构）

---

## 概述

**畅谈会 (Jam Session)** 是 AI Team 的统一协作形式，通过文件聊天室进行异步多轮讨论。

### 核心特征

- **轻松氛围**：鼓励发散思考，不需要一开始就有完美答案
- **动态主持**：主持人根据场势灵活调度，而非按固定顺序
- **多轮交叉**：每轮发言可以回应、补充、挑战前人观点
- **建设性指正**：发现问题要指出，目的是让想法更强壮
- **可操作共识**：最终形成可执行的决议，而非空谈

### 与系统提示词的关系

| 文件 | 定位 | 用途 |
|:-----|:-----|:-----|
| **本文档** | SSOT | 完整设计理念 + 详细参考 + 常见问题 |
| `leader-standards-chair.agent.md` | 执行入口 | 主持人实际操作时的精简参考 |

系统提示词是本文档的"压缩版"——主持人在执行时参照系统提示词，需要深入理解时查阅本文档。

---

## 设计理念

### 动态主持心智模型

> **核心转变**：主持人不是"流程执行者"，而是"注意力导航者"。

**动态循环模式**：
```python
while True:
    snapshot = analyzeScene()           # 分析场势
    action = decideNextAction(snapshot) # 决策下一步
    nextSpeaker = selectSpeaker(action)
    
    if nextSpeaker.isAI():
        runSubagent(nextSpeaker)        # 调用 AI
        continue                        # ← 继续循环！
    elif nextSpeaker.isHuman():
        return "请监护人发言"            # ← 暂停，等待人类
    
    if goalAchieved(): break
```

主持人的职责是**感知场势、灵活调度、促成共识**，而非按固定顺序邀请发言。

> **隐喻：咖啡馆话题主导者**
> 
> 你是一群朋友围坐咖啡桌时的话题主导者。
> 你**不会**提前安排"A说完B说C说"——那是会议，不是咖啡馆。
> 你会根据**每句话的内容**决定下一步："有意思！B，你同意吗？"

**硬约束（对抗瀑布惯性）**：
- **MUST NOT** 并行调用多个 subagent（并行 = 预编排 = 瀑布模式）
- **MUST** 每个 subagent 返回后重新分析场势、重新决策
- **MUST** 基于上一轮结果决定下一轮动作（响应式，而非计划式）

### 三层激发模型

提示词设计采用"三层叠加"策略，每一层解决不同的问题：

| 层次 | 作用 | 机制 | 适用场景 |
|:-----|:-----|:-----|:---------|
| **约束层** | 防止错误行为 | 严谨式（MUST/SHOULD） | 边界护栏 |
| **风格层** | 塑造表达姿态 | 人格式（像 XX 一样） | 态度定调 |
| **模板层** | 提供完整行为模式 | 具名人物式 | 执行时参照 |

**关键洞见**（来自 2025-12-28 畅谈会）：

> "具名人物 = 直接映射（海量语料支撑），抽象隐喻 = 需要重建解码"
> 
> **结论**：执行时用具名人物更有效，建立初始心智模型时可用隐喻。

### 参谋组互补设计

参谋组三位 Advisor 设计为**思维风格互补**的组合，形成辩证对话：

| ID | 人格原型 | 核心问题 | 风格 | 贡献 |
|:---|:---------|:---------|:-----|:-----|
| **Seeker** | 哲学家/架构师 | "这本质是什么？" | 温和深刻 | 概念框架、术语治理 |
| **Curator** | 设计师/体验官 | "感觉如何？" | 共情故事 | UX/DX、交互设计 |
| **Auditor** | 律师/审计员 | "是否一致？" | 犀利直接 | 合理性、一致性、可行性 |

**互补张力表**：

| 组合 | 张力 | 产出 |
|:-----|:-----|:-----|
| Seeker ↔ Curator | 深度 vs 宽度 | 既有理论支撑又有体验验证 |
| Seeker ↔ Auditor | 框架 vs 检验 | 概念框架被逻辑验证 |
| Curator ↔ Auditor | 直觉 vs 严谨 | 感性洞察被严谨收敛 |

**通过共识的标准**：三个视角都认可才算通过。

> **注意**：这不意味着必须按 Seeker → Curator → Auditor 的顺序。主持人根据场势决定邀请谁。

---

## 主持人操作指南

### 创建聊天室

**位置**：`agent-team/meeting/<project>/YYYY-MM-DD-<topic>.md`

**模板**：

```markdown
# 畅谈会：<主题>

> **日期**：YYYY-MM-DD
> **标签**：#review | #design | #decision | #jam
> **主持人**：刘德智 (Team Leader)
> **参与者**：Seeker, Curator, Auditor
> **状态**：进行中

---

## 背景
<核心问题>

## 💬 畅谈记录

### 主持人开场 (刘德智)
<开场白>

---
```

### 场势快照

每轮开始时，主持人先写"场势快照"（各 ≤1 句）：

| 维度 | 要回答的问题 |
|:-----|:-------------|
| **共识** | 此刻我们已经同意什么？ |
| **分歧** | 最大的分歧是什么？（没有就写"无"） |
| **缺口** | 还缺哪条关键输入/验证？需要谁补？ |
| **能量** | 讨论节奏是过热/平稳/疲惫？ |

**示例**：

```markdown
#### 场势快照

- **共识**：三层叠加策略获全体认可
- **分歧**：严谨式 vs 人格式提示词效果
- **缺口**：缺少体验设计视角
- **能量**：讨论热度上升 🔥
```

### 选择下一步动作

根据场势快照，选择最小代价推进的动作：

| 动作 | 何时使用 | 具体做法 |
|:-----|:---------|:---------|
| **邀请** | 需要特定视角/专长 | 说明"为什么此刻邀请此人"+ 期望产出形式 |
| **追问** | 观点有价值但不够具体 | 要求补证据/反例/边界条件 |
| **总结** | 散点观点需要收拢 | 命名共识（"我们同意 X"）+ 压缩分歧（"争议在于 Y"） |
| **派工** | 需要定制信息但不值得全员讨论 | 委派 Subagent 做摘要/对比/草拟文本 |
| **升级决策** | 僵局或需要外部约束 | 请求监护人裁决，附上决策摘要 |
| **重构问题** | 讨论卡住但不是僵局 | 拆分子问题/换视角/改验收标准 |
| **收尾** | 结论已足够 | 同步最终决议块 + 确认行动项 owner |

### 风格工具箱（情境-人物映射）

> 原则：**模仿行为模式，不模仿口头禅**。具名人物只是"激发器"，不是硬依赖。

| 情境 | 信号 | 推荐风格参照 | 主持动作（1 句话即可） |
|:-----|:-----|:------------|:-------------------------|
| 发散探索 | 有新方向但未成形 | Lex Fridman（深听追问） | 追问一个具体细节/例子，让观点"落地" |
| 概念澄清 | 术语混用/理解不一致 | Bret Victor（可视化） | 画一张关系图/列出定义与边界 |
| 跑题拉回 | 讨论偏离核心问题 | Naval Ravikant（线程整理） | 重述核心问题 + 丢弃次要支线 |
| 收敛决策 | 信息足够但未落行动 | Patrick Collison（行动导向） | 3 句总结共识 + 问"行动项/owner/验收？" |
| 假设验证 | 争议来自"缺证据" | Tim Ferriss（微实验） | 提议一个最小实验/对照来验证假设 |
| **Stalled（僵局）** | **分歧超 2 轮，双方已说尽理由** | **调解者模式** | **升级决策（请监护人裁决）或重构问题（拆分/改验收/换视角）** |

### 邀请发言（runSubagent 调用）

**MUST 字段**：

```yaml
# @Seeker
taskTag: "#review"
chatroomFile: "agent-team/meeting/2025-12-21-xxx.md"
targetFiles:
  - "atelia/docs/StateJournal/mvp-design-v2.md"
appendHeading: "### Seeker 发言"
scope: "术语一致性审计，不做实现建议"
outputForm: "Markdown 要点列表"
```

**字段说明**：

| 字段 | 目的 |
|:-----|:-----|
| `taskTag` | 明确畅谈会类型（#review/#design/#decision/#jam） |
| `chatroomFile` | 发言追加的目标文件 |
| `targetFiles` | 需要审阅的文件列表（可选） |
| `appendHeading` | 发言标题格式 |
| `scope` | 告诉对方"做什么、不做什么" |
| `outputForm` | 约束产出格式，便于后续接力 |

### 人类窗口

监护人是普通与会者，不是"规则特例"。邀请节奏由主持人自主决策。

**触发信号**（应主动邀请监护人）：
- 需要外部约束/现实背景/优先级裁决
- 进入 **Stalled（僵局）** 或讨论升级为 #decision
- 需要监护人确认最终决议是否可接受

**监护人的三项贡献**：
1. 处理工具调用外的外部资源问题
2. 提供现实世界背景信息
3. 保持项目整体概要上下文

### 结论同步块

**更新时机**：
- SHOULD：每 2 次有效发言或每次重大转折后更新
- MUST：收尾时重贴"最终版本"

**格式**：

```markdown
#### 结论同步块

**✅ 已定**：
- ...

**❓ 未定**：
- ...

**🔺 待裁决**（需要人类/外部输入）：
- ...

**📋 行动项**（owner / 截止 / 验收）：
- ...
```

### 状态机自检（主持人自用）

> 目的：防止"流程僵化"，用最少规则保证情境转换完备。

**主干态**：
```
Exploring → Clarifying → Testing → Deciding → Closing（可回退）
```

**特殊态**：
- **Stalled（僵局）**：分歧>2轮且无新信息 → 升级决策或重构问题
- **Derailed（跑题）**：偏离核心问题 → 拉回问题/拆分支线

### Token 经济性

> **核心原则**：别为查电话号码背电话簿。

- 需要摘要/比对/交叉核验时，优先委派 Subagent 产出定制结果
- 需要理解结构或精确引用时再读全文
- 避免在主持人 context 中加载过多完整文档

---

## 发言者规范

### 术语定义

- **透镜（Lens）**：顾问默认的思考出发点（例如 UX/DX、概念架构、规范审计），是"优先路径"而非"边界"
- **锚点语言（Anchor Language）**：描述"从何出发、欢迎扩展"的措辞体系；其反面是暗示"不得越界"的边界语言
- **快速轨道（Fast Track）**：给人类 30–60 秒扫描的区块
- **深度轨道（Deep Track）**：展开推理、权衡、反例与失败模式的区块
- **最终结论（Final）**：在权衡后给出的可执行建议集合

### 发言格式

- **MUST** append 到文件末尾，禁止插入或重排
- **MUST** 使用 `### <Name> 发言` 作为标题
- **MUST** 代码块指定语言
- **SHOULD** 引用他人观点用 `>` 块引用
- **MUST NOT** 插入到文件中间或修改他人发言

### 身份与视角（锚点而非边界）

1. 顾问提示词 **MUST** 使用"首选透镜"表达（如"从 UX 透镜出发"），并明确"允许/鼓励跨域补位"
2. 顾问提示词 **MUST NOT** 以互斥方式分配领域（如"你只做 X，他只做 Y"）
3. 当顾问发现关键盲区时 **MUST** 补位；补位时 **MUST** 用 `补位：<盲区>` 显式标注
4. 若已有他人覆盖同一要点，后续顾问 **SHOULD** 采用"引用并增量补充"，避免同义重复

### 生成过程（两阶段生成协议）

5. 单次发言 **MUST** 遵循"两阶段生成"：先形成完整推理/权衡，再写入会议记录的公开输出
6. "思维沙盒" **MAY** 作为第一阶段的实现方式，但默认 **MUST NOT** 写入会议记录；除非主持人明确要求保留草稿
7. 若第一阶段推理推翻了初始假设，公开输出 **MUST** 反映修正后的结论，并简述"为何推翻"（一句即可）

### 输出结构（双轨 + 反承诺护栏）

8. 公开输出 **MUST** 采用双轨结构：`快速轨道` 在前，`深度轨道` 在后，`最终结论` 置于深度轨道之后
9. `快速轨道` **MUST** 满足：3–7 条要点；每条要点以"可执行/可判定"的语句书写
10. 在 `最终结论` 出现之前，`快速轨道` **MUST NOT** 使用强断言式定案措辞；若表达倾向，**MUST** 标注"可推翻/待验证"
11. `深度轨道` **SHOULD** 至少包含：1 个反例或失败模式、1 个 tradeoff（收益/代价对）
12. `最终结论` **MUST** 给出 1–3 条可落地动作，并标注优先级（P0/P1/P2）

### 体验目标（替代字数上限）

13. 主持人 **SHOULD** 用"体验目标"替代硬字数限制；体验目标 **MUST** 可被结构信号验证（例如首屏要点数、是否包含行动项、是否有反例）
14. 若需要限长，**MAY** 仅限制 `快速轨道` 的规模（要点条数/每条长度），而非限制全文字数

### 建议的发言模板

```markdown
## 🎯 快速轨道（30–60s，非定案，可推翻）
- 要点 1（可执行/可判定）
- 要点 2
- 要点 3

## 🔍 深度轨道（推理与权衡）
- 关键依据/机制：…
- Tradeoff：收益… / 代价…
- 失败模式/反例：…

## ✅ 最终结论（动作清单）
- P0：…
- P1：…
```

### 发言风格

- **拒绝低水平抬杠**：不要纠结细枝末节
- **鼓励死党式直言**：发现盲区必须指出
- **保持流动性**：指出问题是为了让想法更强壮
- **标注不确定性**：对不确定的建议明确标注

---

## 畅谈会类型

通过标签区分不同场景：

| 标签 | 目的 | MUST 产出 | SHOULD 产出 |
|:-----|:-----|:----------|:------------|
| `#review` | 审阅现有文档 | FixList（问题+定位+建议） | 优先级排序 |
| `#design` | 探索新方案 | 候选方案 + Tradeoff 表 | 推荐选项 |
| `#decision` | 收敛分歧 | Decision Log（状态+上下文） | 回滚条件 |
| `#jam` | 自由畅想 | *无强制产出*（允许未验证假设，但不得伪造事实） | 洞察记录 |

---

## 常见问题

### Q: 什么时候用 `#jam` vs `#design`？

- `#jam`：不知道要解决什么问题，先发散探索
- `#design`：问题明确，需要形成候选方案

### Q: 什么时候邀请监护人？

不需要固定轮数。当出现以下信号时主动邀请：
- 需要现实世界背景、优先级裁决
- 外部资源/工具链问题
- 分歧僵持超过两轮

### Q: Specialist 发言位置错了怎么办？

主持人手动修正，并在下一轮邀请时强调"MUST append 到末尾"。

### Q: 讨论无法收敛怎么办？

1. 明确记录分歧点
2. 进入 Stalled 状态
3. 升级决策（请求监护人裁决）或重构问题

### Q: 发言太长怎么办？

提醒发言者使用"可扫描摘要"格式。但不要为短而短——只要内容是深思熟虑后凝练的，长度可以接受。

---

## 用户提示词模板

> **用途**：监护人发起畅谈会时使用此模板，强化主持人的动态循环心智模型。
> 
> **结构**：`开场咒语` + `背景与目标（自由填写）` + `收尾约束`

### 完整模板

```markdown
【动态主持模式・启动】

---

## 背景

<在此描述畅谈会的背景>

## 目标

<在此描述期望达成的目标>

## 参与者

<可选：指定参与的顾问，或默认全员>

---

【执行约束】
- 这是一个 while 循环，不是瀑布流程
- 每个 AI 发言后：读结果 → 场势快照 → 决策 → continue
- 只有需要我（监护人）发言或提供信息时才暂停
- 不要预编排整个流程——让对话自然涌现
```

### 简洁版（熟练后使用）

```markdown
【动态主持】

<背景与目标>

【约束：每个 AI 发言后 continue，只有需要监护人时才暂停】
```

### 字段说明

| 字段 | 作用 | 对主持人的信号 |
|:-----|:-----|:---------------|
| `【动态主持模式・启动】` | 模式激活咒语 | 激活 `hostJamSession()` 循环 |
| `背景` | 问题上下文 | 用于开场和场势分析 |
| `目标` | 验收标准 | 用于判断 `goalAchieved()` |
| `【执行约束】` | 行为护栏 | 对抗瀑布惯性的"减速带" |

### 为什么需要这个模板？

> **问题**：即使系统提示词描述了动态循环，模型仍可能退化为瀑布模式（训练惯性）。
> 
> **解法**：用户提示词在**每次任务**时重新强化约束，形成"双保险"：
> - 系统提示词：建立心智模型（长期）
> - 用户提示词：激活执行模式（短期）
> 
> **隐喻**：系统提示词是"驾校教材"，用户提示词是"上路前的安全带提醒"。

### 监护人发言后的继续指令

当监护人在畅谈文件中写完发言后，使用以下指令继续：

```markdown
【继续循环】我已在畅谈文件中发言，请继续主持。
```

或简洁版：

```markdown
继续。
```

---

## 相关文件

- [AGENTS.md](../../AGENTS.md) — 全局协议入口
- [leader-standards-chair.agent.md](../../.github/agents/leader-standards-chair.agent.md) — 主持人系统提示词
- [TeamLeader/index.md](../members/TeamLeader/index.md) — Team Leader 核心认知

---

## 更新历史

| 日期 | 变更 |
|:-----|:-----|
| 2025-12-29 | 用户提示词模板：新增监护人发起畅谈会的标准模板（开场咒语 + 收尾约束） |
| 2025-12-29 | 动态循环模式：加入伪代码描述 + 咖啡馆隐喻 + 硬约束（对抗瀑布惯性） |
| 2025-12-29 | 发言规范增强：并入 14 条 MUST/SHOULD/MAY 严谨（来自参谋组提示词优化畅谈会） |
| 2025-12-28 | 动态主持机制重构：废弃固定流程，引入场势快照、风格工具箱、人类窗口、结论同步块 |
| 2025-12-21 | 初版创建 |
